{"openapi":"3.0.1","info":{"title":"API https://tvoe-dev.ru/","version":"v1"},"servers":[{"url":"http://localhost:4000"}],"tags":[{"name":"Profile","description":"Профиль"},{"name":"Admin","description":"Административная панель"},{"name":"Catalog","description":"Каталог"},{"name":"Collections","description":"Коллекции"},{"name":"Sitemap","description":"Данные для sitemap.xml"},{"name":"Payment","description":"Тарифы, создание и обработка платежей"},{"name":"Search","description":"Поиск"},{"name":"Auth","description":"Авторизация / регистрация через Яндекс и разрушение сессии"},{"name":"Movies","description":"Фильмы и сериалы"},{"name":"Referral","description":"Реферальная программа"}],"paths":{"/profile":{"get":{"summary":"Получение профиля","tags":["Profile"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Profile id"},"email":{"type":"string","description":"Email user(profile)"},"avatar":{"type":"string","description":"Path to img src profile user"},"firstname":{"type":"string","description":"Имя этого человека"},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}},"allowTrialTariff":{"type":"boolean","description":"Позволен ли пробный тариф"},"role":{"type":"string","description":"Admin, manager или, если это обычный пользователь - это поле отсуствует."},"disabledNotifications":{"type":"Array","description":"Типы отключенных уведомлений - 'SERVICE_NEWS', 'GIFTS_AND_PROMOTIONS', 'PROFILE', 'CINEMA_NEWS', 'SERVICE_NOVELTIES', 'FAVOTITES_AND_BOOKMARKS_NEWS'","items":{"type":"string","description":"Тип отключенного уведомления"}}},"example":{"_id":"4180807e904d20e5d4c1b6qw","email":"alex22@yandex.ru","avatar":null,"firstname":"Иван","allowTrialTariff":false,"role":"admin","subscribe":{"startAt":"2021-04-13T07:41:42.000Z","finishAt":"2021-04-13T07:41:42.000Z","tariffId":"63dbe1687f457bc81bc920cb"},"disabledNotifications":["GIFTS_AND_PROMOTIONS","FAVOTITES_AND_BOOKMARKS_NEWS"]}}}}}}},"patch":{"summary":"Обновления профиля","tags":["Profile"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Успешно или нет"},"alert":{"type":"boolean","description":"Булевое значение"},"msg":{"type":"string","description":"Сообщение \"Имя пользователя обновлено\""}},"example":{"type":"success","alert":true,"description":"Имя пользователя обновлено"}}}}}}},"delete":{"summary":"Удаление профиля","tags":["Profile"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"isRefund":{"type":"string","description":"Желает ли пользователь вернуть средства средства за оставшийся период подписки."},"reason":{"type":"object","description":"Причины удаления аккаунта","properties":{"text":{"type":"string","description":"Комментарий пользователя почему хочет удалить аккаунт"},"types":{"type":"array","items":{"type":"string","description":"Список выбранных пользователем причин - возможные значения - 'NOT_ENOUGH_CONTENT', 'BAD_QUALITY_VIDEO', 'BAD_SOUND', 'NOT_MATCH_TARIFF', 'HIGH_COST_SUBSCRIBTION'"}}}}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"deleted":{"type":"object","description":"Информация по срокам удаления. Восстановить аккаунт можно только в течение одного месяца после удаления","properties":{"start":{"type":"Date","description":"Дата удаления"},"finish":{"type":"Date","description":"Дата удаления + 1 месяц"}}}},"example":{"deleted":{"start":"2022-04-13T07:41:42.000Z","finish":"2021-05-13T07:41:42.000Z"}}}}}}}}},"/profile/recover":{"get":{"summary":"Восстановление профиля","tags":["Profile"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"deleted":{"type":"null","description":"Обнуление поля в модели"}},"example":{"deleted":null}}}}}}}},"/profile/avatar":{"post":{"summary":"Загрузка аватарки","tags":["Profile"],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Исходник сам файл картинки"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"alert":{"type":"boolean","description":true},"src":{"type":"string","description":"Путь к картинке"},"msg":{"type":"string","description":"Информационное ообщение"}},"example":{"type":"success","alert":"true","src":"/images/648f121558529eee66d83d63.jpg","msg":"Аватар обновлен"}}}}}}},"delete":{"summary":"Удаление аватарки","tags":["Profile"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Выводит надпись \"success\""},"src":{"type":"null","description":"Здесь происходит обнуление поля в таблице"},"alert":{"type":"boolean","description":"Показывает true"},"msg":{"type":"string","description":"Выводит надпись \"Аватар удален\""}},"example":{"type":"success","src":"null,","alert":"true,","msg":"Аватар удален"}}}}}}}},"/profile/favorites":{"get":{"summary":"Профиль > Избранное","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"shortDesc":{"type":"string","description":"Краткое описание"},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность"}}},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"Date","description":"Дата релиза"},"categoryAlias":{"type":"string","description":"Вид категориии. Может быть films, serials или collections"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму"},"addedToBookmarkAt":{"type":"Date","description":"Дата добавления фильма/cериала в закладки"}}}}}},"examples":{"example":{"value":{"totalSize":2,"items":[{"name":"Америка: фильм","shortDesc":"Вооруженный пилами Джордж Вашингтон объединяется с обожающим пиво друганом Сэмом Адамсом, чтобы приструнить британцев в ироничной комедии о Войне за независимость США.","trailer":{"_id":"641bf64b0073f02ab65dde80","src":"/videos/641bf64b0073f02ab65dde7f.mp4","thumbnail":"/images/641bf64b0073f02ab65dde81.jpg"},"ageLevel":18,"dateReleased":"2021-06-15","categoryAlias":"films","poster":{"src":"/images/641f4080944e8bd192d18318.jpg"},"rating":7,"duration":5892,"url":"/p/amerika-film","addedToBookmarkAt":"2023-06-07T14:56:03.730Z"},{"name":"Снять блокировку","shortDesc":"Жизнь женщины резко меняется из-за опасного незнакомца, который находит ее телефон и начинает отслеживать каждый шаг.","trailer":{"_id":"63fded1598e2af31cb68b499","src":"/videos/63fded1598e2af31cb68b498.mp4","thumbnail":"/images/63fded1598e2af31cb68b49a.jpg"},"ageLevel":16,"dateReleased":"2023-02-17","categoryAlias":"films","poster":{"src":"/images/63fded0598e2af31cb68b46f.jpg"},"rating":6,"duration":7063.708333,"url":"/p/snyat-blokirovku","addedToBookmarkAt":"2023-06-07T14:56:00.297Z"}]}}}}}}}}},"/profile/bookmarks":{"get":{"summary":"Профиль > Закладки","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"shortDesc":{"type":"string","description":"Краткое описание"},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность"}}},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"Date","description":"Дата релиза"},"categoryAlias":{"type":"string","description":"Вид категориии. Может быть films, serials или collections"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму? путь к фильму?"},"addedToFavoritesAt":{"type":"Date","description":"Дата добавления фильма в раздел фаворитов"}}}}}},"examples":{"example":{"value":{"totalSize":2,"items":[{"name":"Америка: фильм","shortDesc":"Вооруженный пилами Джордж Вашингтон объединяется с обожающим пиво друганом Сэмом Адамсом, чтобы приструнить британцев в ироничной комедии о Войне за независимость США.","trailer":{"_id":"641bf64b0073f02ab65dde80","src":"/videos/641bf64b0073f02ab65dde7f.mp4","thumbnail":"/images/641bf64b0073f02ab65dde81.jpg"},"ageLevel":18,"dateReleased":"2021-06-15","categoryAlias":"films","poster":{"src":"/images/641f4080944e8bd192d18318.jpg"},"rating":7,"duration":5892,"url":"/p/amerika-film","addedToFavoritesAt":"2023-06-07T14:56:03.730Z"},{"name":"Снять блокировку","shortDesc":"Жизнь женщины резко меняется из-за опасного незнакомца, который находит ее телефон и начинает отслеживать каждый шаг.","trailer":{"_id":"63fded1598e2af31cb68b499","src":"/videos/63fded1598e2af31cb68b498.mp4","thumbnail":"/images/63fded1598e2af31cb68b49a.jpg"},"ageLevel":16,"dateReleased":"2023-02-17","categoryAlias":"films","poster":{"src":"/images/63fded0598e2af31cb68b46f.jpg"},"rating":6,"duration":7063.708333,"url":"/p/snyat-blokirovku","addedToFavoritesAt":"2023-06-07T14:56:00.297Z"}]}}}}}}}}},"/profile/history":{"get":{"summary":"Профиль > История просмотров","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количествово пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"shortDesc":{"type":"string","description":"Краткое описание"},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность"}}},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"Date","description":"Дата релиза"},"categoryAlias":{"type":"string","description":"Вид категориию. Может быть films, serials или collections"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Путь к фильму"},"moviepagelogs":{"type":"object","properties":{"_id":{"type":"string","description":"Id таблицы moviePageLogSchema (mongoose.Schema.Types.ObjectId)"},"count":{"type":"number","description":"Kоличество просмотров фильма"},"updatedAt":{"type":"array","items":{"type":"Date","description":"Дата обновления"}}}},"lastLogUpdatedAt":{"type":"array","items":{"type":"Date","description":"Дата последнего обновления"}}}}}}},"examples":{"example":{"value":{"totalSize":2,"items":[{"name":"Америка: фильм","shortDesc":"Вооруженный пилами Джордж Вашингтон объединяется с обожающим пиво друганом Сэмом Адамсом, чтобы приструнить британцев в ироничной комедии о Войне за независимость США.","trailer":{"_id":"641bf64b0073f02ab65dde80","src":"/videos/641bf64b0073f02ab65dde7f.mp4","thumbnail":"/images/641bf64b0073f02ab65dde81.jpg"},"ageLevel":18,"dateReleased":"2021-06-15","categoryAlias":"films","poster":{"src":"/images/641f4080944e8bd192d18318.jpg"},"rating":7,"duration":5892,"url":"/p/amerika-film","moviepagelogs":{"_id":"64007d7d0a569a75e14fc2a1","count":1,"updatedAt":["2023-06-07T16:15:48.5030000Z"]},"lastLogUpdatedAt":["2023-06-07T16:15:48.503Z"]},{"name":"Денежный выстрел: История Pornhub","shortDesc":"Проникните глубже в историю самой известной платформы для взрослых Pornhub и недавний скандал вокруг неё. Детская порнография, сексуальное насилие, половая эксплуатация, торговля людьми — это лишь небольшой перечень того, что было найдено на страницах всем известного сайта","trailer":{"_id":"6419a8a30073f02ab65d4f07","src":"/videos/6419a8a30073f02ab65d4f06.mp4","thumbnail":"/images/6419a8a30073f02ab65d4f08.jpg"},"ageLevel":18,"dateReleased":"2023-02-17","categoryAlias":"films","poster":{"src":"/images/63fded0598e2af31cb68b46f.jpg"},"rating":10,"duration":7063.708333,"url":"/p/snyat-blokirovku","moviepagelogs":{"_id":"6419a7540073f02ab65d4e36","count":1,"updatedAt":["2023-06-07T16:15:48.5030000Z"]},"lastLogUpdatedAt":["2023-06-07T16:15:48.503Z"]}]}}}}}}}}},"/profile/payment":{"get":{"summary":"Профиль > Подписка","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"cursorId","schema":{"type":"number"},"description":"Mongoose.ObjectId документа из таблицы paymentlogs. Если он передается, то вернутся документы у которых id меньше чем заданный ( но зачем это надо?)"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"currentSubscribe":{"type":"object","properties":{"startAt":{"type":"Date","description":"Дата начала текущей подписки"},"finishAt":{"type":"Date","description":"Дата окончания текущей текущей подписки"},"tariffId":{"type":"string","description":"tariffId (mongoose.Schema.Types.ObjectId)"}}},"tariffs":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id тарифа"},"name":{"type":"string","description":"Название тарифа"},"price":{"type":"number","description":"Цена тарифа"},"sort":{"type":"number","description":"Сорт тарифа ( номер для сортировки )"},"hidden":{"type":"string","description":"Название фильма","required":false},"discount":{"type":"number","description":"Cкидка"}}}},"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id оплаты"},"type":{"type":"string","description":"Тип оплаты"},"startAt":{"type":"Date","description":"Дата оплаты"},"finishAt":{"type":"Date","description":"Дата окончания срока действия оплаты"},"tariff":{"type":"object","properties":{"_id":{"type":"string","description":"Id тарифа"},"name":{"type":"string","description":"Название тарифа"},"price":{"type":"number","description":"Цена тарифа"}}}}}}}},"example":{"currentSubscribe":{"startAt":"2023-06-07T15:33:23.0680000Z","finishAt":"2023-12-04T15:33:23.0680000Z","tariffId":"63dbe1687f457bc81bc920cb"},"tariffs":[{"_id":"63dbda927f457bc81bc920c4","name":"14 дней","price":0,"sort":1,"hidden":true},{"_id":"63dbe11e7f457bc81bc920c9","name":"1 месяц","price":199,"sort":2},{"_id":"63dbe1447f457bc81bc920ca","name":"3 месяца","price":499,"discount":17,"sort":3},{"_id":"63dbe1687f457bc81bc920cb","name":"6 месяцев","price":899,"discount":25,"sort":4}],"totalSize":1,"items":[{"_id":"6480a3432fc38dca80429f30","type":"issued-by-admin","startAt":"2023-06-07T15:33:23.068Z","finishAt":"2023-12-04T15:33:23.068Z","tariff":{"_id":"63dbe1687f457bc81bc920cb","name":"6 месяцев","price":899}}]}}}}}}},"/profile/devices":{"get":{"summary":"Профиль > Мои устройства","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"userToken":{"type":"string","description":"JWT Токен юзера"},"totalSize":{"type":"number","description":"Общее количество устройств, с которых был выполнен вход"},"sessions":{"type":"array","description":"Список сессий","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"token":{"type":"string","description":"JWT Токен юзера"},"ip":{"type":"string","description":"Ip адресс юзера"},"os":{"type":"string","description":"Операционная система устройства"},"isBot":{"type":"boolean","description":"Является ли юзер ботом"},"isMobile":{"type":"boolean","description":"Является ли дейвайс мобильным устройством"},"isDesktop":{"type":"boolean","description":"Является ли дейвайс десктопным устройством"},"browser":{"type":"string","description":"Название браузера"},"version":{"type":"string","description":"Версия браузера"},"platform":{"type":"string","description":"Платформа устройства ( ос)"},"createdAt":{"type":"Date","description":"Дата создания"},"_id":{"type":"string","description":"Id сессии (mongoose.Schema.Types.ObjectId)"}}}}},"example":{"userToken":"iyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ODA4MDdlOTA0ZDIwZTVkNGMxYjZkYiIsImlhdCI6MTY4NjE1Mzk2OSwiZXhwIjoxNzE3NzExNTY5fQ.vY6dB6oVVF05afwr9-aD0oHZkELKRKS5YiJwvQs4A3M","totalSize":2,"sessions":[{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ODA4MDdlOTA0ZDIwZTVkNGMxYjZkYiIsImlhdCI6MTY4NjE1Mzk2OSwiZXhwIjoxNzE3NzExNTY5fQ.vY6dB6oVVF05afwr9-aD0oHZkELKRKS5YiJwvQs4A3M","ip":"::ffff:127.0.0.1","os":"Linux 64","isBot":"false,","isMobile":"false,","isDesktop":"true,","browser":"Chrome","version":"103.0.0.0","platform":"Linux","createdAt":"2023-06-07T16:06:09.306Z","_id":"6480aaf12fc38dca8042a3b5"},{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ODA4MDdlOTA0ZDIwZTVkNGMxYjZkYiIsImlhdCI6MTY4NjE1Mzk2OSwiZXhwIjoxNzE3NzExNTY5fQ.vY6dB6oVVF05afwr9-aD0oHZkELKRKS5YiJwvQs4A3M","ip":"::ffff:127.0.0.1","os":"Linux 64","isBot":"false,","isMobile":"false,","isDesktop":"true,","browser":"Firefox","version":"113.0","platform":"Linux","createdAt":"2023-06-07T16:06:09.306Z","_id":"6480aaf12fc38dca8042a3b5"}]}}}}}}}},"/profile/notifications":{"get":{"summary":"Профиль > Список уведомлений для пользователя","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) уведомления"},"title":{"type":"string","description":"Название уведомления"},"description":{"type":"string","description":"Описаниее в уведомлении","required":false},"type":{"type":"string","description":"Тип уведомления - premiere или system"},"willPublishedAt":{"type":"string","description":"Планируемая дата публикации уведомления"},"link":{"type":"string","description":"Ссылка"}}}}},"example":{"value":{"totalSize":2,"items":[{"_id":"64dbd7c6706c0afda61f91dd","title":"Новый сезон игры ВЛАСТЕЛИНА колец","description":"Саруман возвращается","type":"premiere","willPublishedAt":"2022-04-04T00:00:00.000Z","link":"https://kogdavyydet.com/shaman-king-2-sezon.html"},{"_id":"64dbd9ed44164b3fda7577d1","title":"Новый сезон игры Друзей","type":"premiere","willPublishedAt":"2021-04-04T00:00:00.000Z","link":"https://kogdavyydet.com/shaman-king-2-sezon.html"}]}}}}}}}},"post":{"summary":"Загрузка уведомления","tags":["Profile"],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Исходник сам файл картинки уведомления"}}}},"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","description":"Название уведомления"},"description":{"type":"string","description":"Описаниее в уведомлении","required":false},"type":{"type":"string","description":"Тип уведомления - premiere или system"},"willPublishedAt":{"type":"string","description":"Планируемая дата публикации уведомления"},"link":{"type":"string","description":"Ссылка"},"receiversIds":{"type":"array","uniqueItems":true,"description":"Массив из Id получателей (mongoose.ObjectId). Если он не передается, то уведомление будет предназначено для всех пользователей","minItems":0,"items":{"type":"string"}}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"id уведомления"},"success":{"type":"boolean","description":true},"title":{"type":"string","description":"Название уведомления"},"description":{"type":"string","description":"Описаниее в уведомлении","required":false},"type":{"type":"string","description":"Тип уведомления - premiere или system"},"willPublishedAt":{"type":"string","description":"Планируемая дата публикации уведомления"},"link":{"type":"string","description":"Ссылка"},"receiversIds":{"type":"array","uniqueItems":true,"description":"Массив из Id получателей (mongoose.ObjectId). Если этого поля нет, значит уведомление предназначено для всех пользователей","minItems":0,"items":{"type":"string"}},"img":{"type":"object","properties":{"_id":{"type":"string","description":"Id файла (mongoose.ObjectId)"},"src":{"type":"string","description":"Ссылка на файл изображение"}}}},"example":{"success":true,"id":"64ece16991850d7975c3186a","title":"Премьера нового сезона ведьмака","description":"Не пропустите!","type":"premiere","willPublishedAt":"2023-08-20","img":{"_id":"64ece16891850d7975c31868","src":"/images/64ece16891850d7975c31869.jpg"}}}}}}}},"patch":{"summary":"Обновление уведомления","tags":["Profile"],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Исходник сам файл картинки уведомления"}}}},"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","description":"Название уведомления"},"description":{"type":"string","description":"Описаниее в уведомлении","required":false},"type":{"type":"string","description":"Тип уведомления - premiere или system"},"willPublishedAt":{"type":"string","description":"Планируемая дата публикации уведомления"},"link":{"type":"string","description":"Ссылка"},"receiversIds":{"type":"array","uniqueItems":true,"description":"Массив из Id получателей (mongoose.ObjectId). Если он не передается, то уведомление будет предназначено для всех пользователей","minItems":0,"items":{"type":"string"}}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Уведомление обновлено"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","alert":true,"msg":"Уведомление обновлено"}}}}}}},"delete":{"summary":"Удаление уведомления","tags":["Profile"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id уведомления для удаления"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"_id":{"type":"string","description":"Id уведомления для удаления"},"msg":{"type":"string","description":"Успешно удалено"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","_id":"64d15212c3003ddd2d373642","alert":true,"msg":"Успешно удалено"}}}}}}}},"/profile/notifications/count":{"get":{"summary":"Профиль > Количество просмотров у одного уведомления","tags":["Profile"],"parameters":[{"in":"query","name":"id","schema":{"type":"string"},"description":"Id(mongoose.ObjectId)уведомления, количество просмотров которого необходимо посмотреть"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Количество просмотров уведомления"},"id":{"type":"number","description":"Id (mongoose.ObjectId) уведомления"}},"example":{"totalSize":10,"id":"64d15212c3003ddd2d373642"}}}}}}}},"/profile/notifications/countAll":{"get":{"summary":"Профиль > Количество просмотров у всех уведомлений","tags":["Profile"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) уведомления"},"title":{"type":"string","description":"Название уведомления"},"description":{"type":"string","description":"Описаниее в уведомлении","required":false},"type":{"type":"string","description":"Тип уведомления - premiere или system"},"updatedAt":{"type":"string","description":"Дата обновления"},"img":{"type":"object","properties":{"_id":{"type":"string","description":"Id файла изображения"},"src":{"type":"string","description":"Ссылка на изображения"}}},"watchingAmount":{"type":"number","description":"Количество просмотров"}}}}},"example":{"totalSize":2,"items":[{"_id":"64ece16991850d7975c3186a","title":"Премьера нового сезона ведьмака","description":"Не пропустите!","type":"premiere","img":{"_id":"64ece16891850d7975c31868","src":"/images/64ece16891850d7975c31869.jpg"},"updatedAt":"2023-08-28T18:03:21.578Z","watchingAmount":7},{"_id":"64dbddb8b7ef836bbda14ad9","title":"11 друзей оушена","type":"premiere","updatedAt":"2023-08-15T20:19:04.521Z","watchingAmount":10}]}}}}}}}},"/profile/notifications/markAsRead":{"patch":{"summary":"Профиль > Список уведомлений для пользователя","tags":["Profile"],"requestBody":{"content":{"application/json":{"schema":{"type":"array","uniqueItems":true,"description":"Массив из Id уведомлений (mongoose.ObjectId)","minItems":0,"items":{"type":"string"}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Успешно обновлено"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","alert":true,"msg":"Успешно обновлено"}}}}}}}},"/profile/notifications/settings":{"patch":{"summary":"Профиль > Настройка уведомлений ( включение и выключение определенных категорий)","tags":["Profile"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","description":"Ключи - виды уведомлений, значения - булевый тип, определяйющий включение если извлечение заданного типа уведомлений из списка выключенных уведомлений. False - для добавления заданного вида уведомлений в список выключенных, true - для извлечения из выключенных","properties":{"SERVICE_NEWS":{"type":"boolean","description":"Новости сервиса - уведомления о технических работах на сайте и новинках обновленного сервиса","required":false},"GIFTS_AND_PROMOTIONS":{"type":"boolean","description":"Подарки и акции - бонусы для пользователей","required":false},"PROFILE":{"type":"boolean","description":"Профиль - напоминание об окончании подписки и индивидуальные предложения","required":false},"CINEMA_NEWS":{"type":"boolean","description":"Новинки кинематографа","required":false},"SERVICE_NOVELTIES":{"type":"boolean","description":"Новинки на сервисе","required":false},"FAVOTITES_AND_BOOKMARKS_NEWS":{"type":"boolean","description":"Новинки из раздела \"избранное\" и \"буду смотреть\"","required":false}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Успешно обновлено"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","alert":true,"msg":"Успешно обновлено"}}}}}}}},"/admin/categories":{"get":{"summary":"Получение категорий","tags":["Admin"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","uniqueItems":true,"minItems":2,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) категории"},"name":{"type":"string","description":"Название категории"},"alias":{"type":"string","description":"Алиас категории"},"aliasInUrl":{"type":"string","description":"Алиас категории в url"},"genres":{"type":"array","uniqueItems":true,"description":"Список жанров","items":{"type":"object","properties":{"name":{"type":"string","description":"Название жанра"},"alias":{"type":"string","description":"Алиас жанра"}}}}}}},"examples":{"example":{"value":[{"_id":"63ab0d42f92598f4d7b7f7f2","name":"Фильмы","alias":"films","aliasInUrl":"films","genres":[{"name":"Аниме","alias":"anime"},{"name":"Биографии","alias":"biografii"},{"name":"Боевики","alias":"boeviki"},{"name":"Вестерны","alias":"vesterny"},{"name":"Военные","alias":"voennye"},{"name":"Детективы","alias":"detektivy"},{"name":"Документальные","alias":"dokumentalnye"},{"name":"Драмы","alias":"dramy"},{"name":"Исторические","alias":"istoricheskie"},{"name":"Комедии","alias":"komedii"},{"name":"Короткометражки","alias":"korotkometrazhki"},{"name":"Криминал","alias":"kriminal"},{"name":"Мелодрамы","alias":"melodramy"},{"name":"Музыкальные","alias":"muzykalnye"},{"name":"Мультфильмы","alias":"multfilmy"},{"name":"Мюзиклы","alias":"myuzikly"},{"name":"Приключения","alias":"priklyucheniya"},{"name":"Семейные","alias":"semeynye"},{"name":"Спортивные","alias":"sportivnye"},{"name":"Триллеры","alias":"trillery"},{"name":"Ужасы","alias":"uzhasy"},{"name":"Фантастика","alias":"fantastika"},{"name":"Фэнтези","alias":"fentezi"}]},{"_id":"63ab0d4bf92598f4d7b7f7f4","name":"Сериалы","alias":"serials","aliasInUrl":"serialy","genres":[{"name":"Аниме","alias":"anime"},{"name":"Биографии","alias":"biografii"},{"name":"Боевики","alias":"boeviki"},{"name":"Вестерны","alias":"vesterny"},{"name":"Военные","alias":"voennye"},{"name":"Детективы","alias":"detektivy"},{"name":"Документальные","alias":"dokumentalnye"},{"name":"Драмы","alias":"dramy"},{"name":"Исторические","alias":"istoricheskie"},{"name":"Комедии","alias":"komedii"},{"name":"Короткометражки","alias":"korotkometrazhki"},{"name":"Криминал","alias":"kriminal"},{"name":"Мелодрамы","alias":"melodramy"},{"name":"Музыкальные","alias":"muzykalnye"},{"name":"Мультфильмы","alias":"multfilmy"},{"name":"Мюзиклы","alias":"myuzikly"},{"name":"Приключения","alias":"priklyucheniya"},{"name":"Семейные","alias":"semeynye"},{"name":"Спортивные","alias":"sportivnye"},{"name":"Триллеры","alias":"trillery"},{"name":"Ужасы","alias":"uzhasy"},{"name":"Фантастика","alias":"fantastika"},{"name":"Фэнтези","alias":"fentezi"}]}]}}}}}}}},"/admin/users":{"get":{"summary":"Админ-панель > Пользователи","tags":["Admin"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"query","schema":{"type":"number"},"description":"Для поиска документов (сущностей таблицы users), с которыми совпадают символы в имени и емейлу. Либо для полного совпадения по id (mongoose.ObjectId)  пользователя"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Profile id"},"role":{"type":"string","required":false,"description":"Роль этого профиля. Admin, manager или если это обычный пользователь то это поле отсуствует."},"email":{"type":"string","description":"Email user(profile)"},"avatar":{"type":"string","description":"Path to img src profile user"},"firstname":{"type":"string","description":"Имя этого человека"},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}},"createdAt":{"type":"Date","description":"Дата создания"},"updatedAt":{"type":"Date","description":"Дата обновления"},"lastVisitAt":{"type":"Date","description":"Дата последнего посещения"}}}}}},"examples":{"example":{"value":{"totalSize":2,"items":[{"_id":"6480807e904d20e5d4c1b6db","email":"7on9911239@gmail.com","avatar":null,"firstname":"Петр12","subscribe":{"startAt":"2023-06-07T15:33:23.068Z","finishAt":"2023-12-04T15:33:23.068Z","tariffId":"63dbe1687f457bc81bc920cb"},"lastVisitAt":"2023-06-20T18:32:24.789Z","createdAt":"2023-06-07T13:05:02.626Z","updatedAt":"2023-06-18T14:42:03.013Z","role":"admin"},{"_id":"63c8c56b6396809788dfdc9a","email":"ejevika1412@yandex.ru","avatar":"/images/63c8c56b6396809788dfdc99.jpg","firstname":"Виктория","lastVisitAt":"2023-01-19T05:43:12.968Z","createdAt":"2023-01-19T04:22:03.047Z","updatedAt":"2023-02-12T04:39:28.502Z","subscribe":{"startAt":"2023-02-12T04:39:28.501Z","finishAt":"2023-05-13T04:39:28.501Z","tariffId":"63dbe1447f457bc81bc920ca"}}]}}}}}}}}},"/admin/users/profile":{"get":{"summary":"Админ-панель > Получение пользователя","tags":["Admin"],"parameters":[{"in":"query","name":"id","schema":{"type":"string"},"description":"id пользователя (mongoose.ObjectId)"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"type":"object","description":"Общее количество сущностей в БД","properties":{"_id":{"type":"string","description":"Profile id"},"role":{"type":"string","required":false,"description":"Роль этого профиля. Admin, manager или если это обычный пользователь то это поле отсуствует."},"email":{"type":"string","description":"Email user(profile)"},"avatar":{"type":"string","description":"Path to img src profile user"},"firstname":{"type":"string","description":"Имя этого человека"},"deleted":{"type":"boolean","description":"Удален ли аккаунт. Если не удален, этого поля нет","required":false},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}}}},"tariffs":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Profile id"},"name":{"type":"string","description":"Название тарифа"},"price":{"type":"number","description":"Цена тарифа"},"sort":{"type":"string","description":"Сорт тарифа?"},"hidden":{"type":"boolean","description":"Скрыт ли тариф","required":false}}}}}},"examples":{"example":{"value":{"user":{"email":"ovodenko.ksenia@yandex.ru","avatar":null,"firstname":"ксения","subscribe":{"startAt":"2023-02-12T04:39:28.501Z","finishAt":"2023-05-13T04:39:28.501Z","tariffId":"63dbe1447f457bc81bc920ca"}},"tariffs":[{"_id":"63f7537f841f04f2348f8de5","name":"7 дней","price":0,"sort":0},{"_id":"63dbda927f457bc81bc920c4","name":"14 дней","price":0,"sort":1,"hidden":true},{"_id":"63dbe11e7f457bc81bc920c9","name":"1 месяц","price":199,"sort":2},{"_id":"63dbe1447f457bc81bc920ca","name":"3 месяца","price":499,"discount":17,"sort":3},{"_id":"63dbe1687f457bc81bc920cb","name":"6 месяцев","price":899,"discount":25,"sort":4}]}}}}}}}},"patch":{"summary":"Админ-панель > Обновления пользователя","tags":["Admin"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","description":"Id пользователя (mongoose.ObjectId)"},"role":{"type":"string","description":"Admin, manager или если это обычный пользователь то это поле отсуствует."},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Профиль обновлен"}},"example":{"type":"success","msg":"Профиль обновлен"}}}}}}}},"/admin/users/movies":{"get":{"summary":"Админ-панель > Получение списка фильмов и сериалов","tags":["Admin"],"parameters":[{"in":"query","name":"skip","schema":{"type":"string"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"query","schema":{"type":"string"},"description":"Название фильма или сериала"},{"in":"query","name":"limit","schema":{"type":"string"},"description":"Ограничение на максимальное количество элементов в теле ответа"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей (фильмов и сериалов) в БД"},"totalSizePublished":{"type":"number","description":"Kоличество опубликованных фильмов и сериалов"},"totalSizeUnpublished":{"type":"number","description":"Kоличество неопубликованных фильмов и сериалов"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"name":{"type":"string","description":"Название фильма на русском"},"origName":{"type":"string","description":"Оригинальное название фильма на английском"},"shortDesc":{"type":"string","description":"Краткое описание"},"fullDesc":{"type":"string","description":"Полное описание"},"alias":{"type":"string","description":"Сгенерированный ЧПУ (человеко понятный url)"},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"string","description":"Дата выпуска"},"countries":{"type":"array","description":"Cписок стран","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название страны"}},"categoryAlias":{"type":"string","description":"Вид категориию. Может быть films, serials"},"genresAliases":{"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}},"persons":{"type":"array","description":"Список актёров и преставителей съемочной группы","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"mongoose.ObjectId"},"name":{"type":"string","description":"Имя и фамилия человека"},"type":{"type":"string","description":"director - режиссер, actor - актер, producer - продюсер, screenwriter - сценарист, operator - оператор"}}}},"series":{"type":"array","description":"Список серий. Приходят в во вложенном массиве","uniqueItems":true,"minItems":0,"items":{"type":"array","description":"Список серий","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id cерии (mongoose.ObjectId)"},"src":{"type":"string","description":"Источник на файл ( путь к исходнику )"},"duration":{"type":"number","description":"Продолжительность серии"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"}}}}},"films":{"type":"array","description":"Список фильмов","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"src":{"type":"string","description":"Источник на файл ( путь к исходнику )"},"duration":{"type":"number","description":"Длительность фильма"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"}}}},"createdAt":{"type":"Date","description":"Дата создания"},"updatedAt":{"type":"Date","description":"Дата обновления"},"poster":{"type":"object","properties":{"id":{"type":"string","description":"mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению постера"}}},"cover":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"}}},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность"}}},"logo":{"type":"object","properties":{"id":{"type":"string","description":"mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению логотипа"}}},"raisedUpAt":{"type":"Date","description":"Дата поднятия в списке (для актуальности)"},"publishedAt":{"type":"Date","description":"Дата публикации"}}}}}},"examples":{"example":{"value":{"totalSize":719,"totalSizePublished":405,"totalSizeUnpublished":314,"items":[{"_id":"63ff381e53758c7ea6bc6e30","name":"Битва при Нарвике: Первое поражение Гитлера","origName":"Kampen om Narvik","shortDesc":"На фоне сражения во Второй мировой войне, известного как первое поражение Гитлера, норвежский солдат возвращается домой и узнает шокирующую правду о своей жене.","fullDesc":"На фоне сражения во Второй мировой войне, известного как первое поражение Гитлера, норвежский солдат возвращается домой и узнает шокирующую правду о своей жене.","alias":"bitva-pri-narvike-pervoe-porazhenie-gitlera","ageLevel":16,"dateReleased":"2022-12-15","countries":["Норвегия"],"categoryAlias":"films","genresAliases":["dramy","voennye","istoricheskie"],"persons":[{"name":"Эрик Шёлдбьерг","type":"director","_id":"63ff381e53758c7ea6bc6e31"},{"name":"Билл Кэмпбелл","type":"actor","_id":"63ff381e53758c7ea6bc6e32"},{"name":"Kristine Hartgen","type":"actor","_id":"63ff381e53758c7ea6bc6e33"},{"name":"Хенрик Местад","type":"actor","_id":"63ff381e53758c7ea6bc6e34"},{"name":"Стиг Хенрик Хофф","type":"actor","_id":"63ff381e53758c7ea6bc6e35"},{"name":"Карл Мартин Эггесбё","type":"actor","_id":"63ff381e53758c7ea6bc6e36"},{"name":"Кристоф Бах","type":"actor","_id":"63ff381e53758c7ea6bc6e37"},{"name":"Магнус Дагдэйл","type":"actor","_id":"63ff381e53758c7ea6bc6e38"},{"name":"Хольгер Хандтке","type":"actor","_id":"63ff381e53758c7ea6bc6e39"},{"name":"Матильда Хольтедаль Кура","type":"actor","_id":"63ff381e53758c7ea6bc6e3a"},{"name":"Эмиль Йонсен","type":"actor","_id":"63ff381e53758c7ea6bc6e3b"},{"name":"Ааге Ааберге","type":"producer","_id":"63ff381e53758c7ea6bc6e3c"},{"name":"Ливе Бонневье","type":"producer","_id":"63ff381e53758c7ea6bc6e3d"},{"name":"Кьетиль Йенсберг","type":"producer","_id":"63ff381e53758c7ea6bc6e3e"},{"name":"Ливе Бонневье","type":"screenwriter","_id":"63ff381e53758c7ea6bc6e3f"},{"name":"Кристофер Грендал","type":"screenwriter","_id":"63ff381e53758c7ea6bc6e40"},{"name":"Себастиан Торнгрен Вартин","type":"screenwriter","_id":"63ff381e53758c7ea6bc6e41"},{"name":"Джон-Эрлинг Х. Фредриксен","type":"operator","_id":"63ff381e53758c7ea6bc6e42"}],"series":[],"films":[{"_id":"640379c00a569a75e1507d6b","src":"/videos/640379ae0a569a75e1507d29.mp4","duration":6546.833333,"thumbnail":"/images/640379c00a569a75e1507d6c.jpg"}],"createdAt":"2023-03-01T11:33:50.551Z","updatedAt":"2023-05-30T06:02:12.228Z","poster":{"_id":"640376060a569a75e1507a93","src":"/images/640376060a569a75e1507a94.jpg"},"cover":{"_id":"640376080a569a75e1507aac","src":"/images/640376080a569a75e1507aad.jpg"},"logo":{"_id":"642f38428e6fd86616fdf3cf","src":"/images/642f38428e6fd86616fdf3d0.png"},"trailer":{"_id":"642f38728e6fd86616fdf40d","src":"/videos/642f38728e6fd86616fdf40a.mp4","thumbnail":"/images/642f38728e6fd86616fdf40c.jpg"},"publishedAt":"2023-03-04T17:03:08.058Z","raisedUpAt":"2023-05-30T06:02:12.228Z"},{"_id":"63c550711c98adb3690e3b64","name":"Шальная пуля","origName":"Balle perdue","shortDesc":"Одаренного механика обвиняют в убийстве, которого он не совершал. Единственным доказательством его невиновности является пуля с места преступления, застрявшая в пропавшей машине.","fullDesc":"Одаренного механика обвиняют в убийстве, которого он не совершал. Единственным доказательством его невиновности является пуля с места преступления, застрявшая в пропавшей машине.","alias":"shalnaya-pulya","ageLevel":16,"dateReleased":"2020-06-19","countries":["Франция"],"categoryAlias":"serials","genresAliases":[],"persons":[{"name":"Гийом Пьерре","type":"director","_id":"63c550711c98adb3690e3b65"},{"name":"Альбан Ленуар","type":"actor","_id":"63c550711c98adb3690e3b66"},{"name":"Николя Дювошель","type":"actor","_id":"63c550711c98adb3690e3b67"},{"name":"Рамзи Бедиа","type":"actor","_id":"63c550711c98adb3690e3b68"},{"name":"Стефи Сельма","type":"actor","_id":"63c550711c98adb3690e3b69"},{"name":"Род Парадо","type":"actor","_id":"63c550711c98adb3690e3b6a"},{"name":"Себастьян Лаланн","type":"actor","_id":"63c550711c98adb3690e3b6b"},{"name":"Arthur Aspaturian","type":"actor","_id":"63c550711c98adb3690e3b6c"},{"name":"Патрик Медиони","type":"actor","_id":"63c550711c98adb3690e3b6d"},{"name":"Александр Филип","type":"actor","_id":"63c550711c98adb3690e3b6e"},{"name":"Стивен Скардиккьо","type":"actor","_id":"63c550711c98adb3690e3b6f"},{"name":"Rémi Leautier","type":"producer","_id":"63c550711c98adb3690e3b70"},{"name":"Жак-Анри Бронкар","type":"producer","_id":"63c550711c98adb3690e3b71"},{"name":"Матье Ажерон","type":"producer","_id":"63c550711c98adb3690e3b72"},{"name":"Гийом Пьерре","type":"screenwriter","_id":"63c550711c98adb3690e3b73"},{"name":"Камел Гемра","type":"screenwriter","_id":"63c550711c98adb3690e3b74"},{"name":"Альбан Ленуар","type":"screenwriter","_id":"63c550711c98adb3690e3b75"},{"name":"Морган С. Далибер","type":"operator","_id":"63c550711c98adb3690e3b76"}],"series":[[{"_id":"64732eecfa87aa4b70851c64","duration":155.738333,"src":"/videos/64732eecfa87aa4b70851c65","thumbnail":"/images/64732eecfa87aa4b70851c66.jpg"}]],"films":[],"createdAt":"2023-01-16T13:26:09.825Z","updatedAt":"2023-05-28T10:37:32.587Z","publishedAt":"2023-05-08T14:14:07.398Z","raisedUpAt":"2023-05-10T10:34:05.802Z"}]}}}}}}}},"post":{"summary":"Добавление / редактирование записей ( фильмов и сериалов )","tags":["Admin"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)","required":false},"name":{"type":"string","description":"Название фильма на русском","required":false},"origName":{"type":"string","description":"Оригинальное название фильма на английском","required":false},"shortDesc":{"type":"string","description":"Краткое описание","required":false},"fullDesc":{"type":"string","description":"Полное описание","required":false},"alias":{"type":"string","description":"Сгенерированный человекопонятный url","required":false},"ageLevel":{"type":"string","description":"Возрастное ограничение","required":false},"dateReleased":{"type":"string","description":"Дата выпуска","required":false},"countries":{"type":"array","description":"Cписок стран","required":false,"uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название страны"}},"categoryAlias":{"required":false,"type":"string","description":"Вид категориию. Может быть films, serials"},"genresAliases":{"required":false,"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}},"badge":{"type":"object","description":"Бейдж","required":false,"properties":{"type":{"type":"string","descriptipn":"newSeason - новый сезон, premiere - премьера"},"startAt":{"type":"date","descriptipn":"дата начала показа бейджа"},"finishAt":{"type":"date","descriptipn":"дата окончания показа бейджа"}}},"persons":{"required":false,"type":"array","description":"Список актёров и преставителей съемочной группы","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Mongoose.ObjectId"},"name":{"type":"string","description":"Имя и фамилия человека"},"type":{"type":"string","description":"Director - режиссер, actor - актер, producer - продюсер, screenwriter - сценарист, operator - оператор"}}}}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Статус операции ( в случае успеха - 'success')","required":true},"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)","required":true},"name":{"type":"string","description":"Название фильма на русском","required":false},"origName":{"type":"string","description":"Оригинальное название фильма на английском","required":false},"shortDesc":{"type":"string","description":"Краткое описание","required":false},"fullDesc":{"type":"string","description":"Полное описание","required":false},"alias":{"type":"string","description":"Сгенерированный человекопонятный url","required":false},"ageLevel":{"type":"string","description":"Возрастное ограничение","required":false},"dateReleased":{"type":"string","description":"Дата выпуска","required":false},"countries":{"type":"array","description":"Cписок стран","required":false,"uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название страны"}},"categoryAlias":{"required":false,"type":"string","description":"Вид категориию. Может быть films, serials"},"genresAliases":{"required":false,"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}},"badge":{"type":"object","description":"Бейдж","reqired":false,"properties":{"type":{"type":"string","descriptipn":"newSeason - новый сезон, premiere - премьера"},"startAt":{"type":"date","descriptipn":"Дата начала показа бейджа"},"finishAt":{"type":"date","descriptipn":"Дата окончания показа бейджа"}}},"persons":{"required":false,"type":"array","description":"Список актёров и преставителей съемочной группы","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"mongoose.ObjectId"},"name":{"type":"string","description":"Имя и фамилия человека"},"type":{"type":"string","description":"director - режиссер, actor - актер, producer - продюсер, screenwriter - сценарист, operator - оператор"}}}},"alert":{"type":"boolean","description":"надпись true","required":true},"msg":{"type":"string","description":"Успешно сохранено","required":true}},"example":{"name":"Армия воров 3","origName":"Army of Thieves 2","shortDesc":"В этом приквеле «Армии мертвецов» загадочная женщина нанимает банковского служащего Дитера, чтобы тот помог взломать три легендарных сейфа в разных частях Европы.","fullDesc":"Скромный банковский служащий Себастиан ведёт непопулярный видеоблог, в котором рассказывает об увлечении всей жизни — взломе сейфов. Разумеется, законопослушный парень никогда не применял свои навыки в криминальной деятельности, но однажды на него выходит команда разыскиваемых Интерполом преступников и делает предложение, от которого невозможно отказаться. Пока в Штатах разворачивается зомби-эпидемия, они планируют взломать три находящихся в Европейских банках легендарных сейфа, созданных великим мастером Хансом Вагнером по мотивам опер своего знаменитого тёзки.","alias":"armiya-vorov","ageLevel":16,"dateReleased":"2021-10-28","countries":"undefined","categoryAlias":"undefined","genresAliases":["boeviki","trillery","kriminal"],"persons":[{"name":"Руби О. Фи","type":"actor"},{"name":"Стюарт Мартин","type":"actor"},{"name":"Гуз Кхан","type":"actor"}],"alert":true,"_id":"64997588f616d7446030581f","msg":"Успешно сохранено"}}}}}}}},"/admin/users/movies/movie":{"get":{"summary":"Админ-панель > Получение одной записи ( фильма или сериала )","tags":["Admin"],"parameters":[{"in":"query","name":"skip","schema":{"type":"string"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"limit","schema":{"type":"string"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"id","schema":{"type":"string"},"description":"Название фильма или сериала"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"name":{"type":"string","description":"Название фильма на русском"},"origName":{"type":"string","description":"Оригинальное название фильма на английском"},"shortDesc":{"type":"string","description":"Краткое описание"},"fullDesc":{"type":"string","description":"Полное описание"},"alias":{"type":"string","description":"Сгенерированный человекопонятный url"},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"string","description":"Дата выпуска"},"countries":{"type":"array","description":"Cписок стран","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название страны"}},"categoryAlias":{"type":"string","description":"Вид категориию. Может быть films, serials"},"genresAliases":{"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}},"persons":{"type":"array","description":"Список актёров и преставителей съемочной группы","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"mongoose.ObjectId"},"name":{"type":"string","description":"Имя и фамилия человека"},"type":{"type":"string","description":"director - режиссер, actor - актер, producer - продюсер, screenwriter - сценарист, operator - оператор"}}}},"series":{"type":"array","description":"Список серий. Приходят в во вложенном массиве","uniqueItems":true,"minItems":0,"items":{"type":"array","description":"Список серий","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id cерии (mongoose.ObjectId)"},"src":{"type":"string","description":"источник на файл ( путь к исходнику )"},"duration":{"type":"number","description":"Продолжительность серии"},"thumbnail":{"type":"string","description":"миниатюра (кадр из видео)"}}}}},"films":{"type":"array","description":"список фильмов","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Имя и фамилия человека"},"src":{"type":"string","description":"источник на файл ( путь к исходнику )"},"duration":{"type":"number","description":"длительность фильма"},"thumbnail":{"type":"string","description":"миниатюра (кадр из видео)"}}}},"createdAt":{"type":"Date","description":"Дата создания"},"updatedAt":{"type":"Date","description":"Дата обновления"},"poster":{"type":"object","properties":{"id":{"type":"string","description":"mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению постера"}}},"cover":{"type":"object","properties":{"id":{"type":"string","description":"mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"}}},"logo":{"type":"object","properties":{"id":{"type":"string","description":"mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению логотипа"}}},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность","required":false}}},"raisedUpAt":{"type":"Date","description":"Дата поднятия в списке (для актуальности)"},"publishedAt":{"type":"Date","description":"Дата публикации"}}},"examples":{"example":{"value":{"name":"Убийство в Париже","countries":["США"],"genresAliases":["detektivy","komedii","kriminal"],"persons":[{"name":" Джереми Гарелик","type":"director","_id":"642f383a8e6fd86616fdf3a9"},{"name":"Адам Сэндлер","type":"actor","_id":"642f383a8e6fd86616fdf3aa"},{"name":"Дженнифер Энистон","type":"actor","_id":"642f383a8e6fd86616fdf3ab"},{"name":"Марк Стронг","type":"actor","_id":"642f383a8e6fd86616fdf3ac"},{"name":"Мелани Лоран","type":"actor","_id":"642f383a8e6fd86616fdf3ad"},{"name":"Джоди Тёрнер-Смит","type":"actor","_id":"642f383a8e6fd86616fdf3ae"},{"name":"Джон Кани","type":"actor","_id":"642f383a8e6fd86616fdf3af"},{"name":"Куху Верма","type":"actor","_id":"642f383a8e6fd86616fdf3b0"},{"name":"Дэни Бун","type":"actor","_id":"642f383a8e6fd86616fdf3b1"},{"name":"Адиль Ахтар","type":"actor","_id":"642f383a8e6fd86616fdf3b2"},{"name":"Энрике Арсе","type":"actor","_id":"642f383a8e6fd86616fdf3b3"},{"name":" Дженнифер Энистон","type":"producer","_id":"642f383a8e6fd86616fdf3b4"},{"name":"Рафаэль Бенолье","type":"producer","_id":"642f383a8e6fd86616fdf3b5"},{"name":"Бэрри Бернарди","type":"producer","_id":"642f383a8e6fd86616fdf3b6"},{"name":" Джеймс Вандербилт","type":"screenwriter","_id":"642f383a8e6fd86616fdf3b7"},{"name":" Боян Бацелли","type":"operator","_id":"642f383a8e6fd86616fdf3b8"}],"series":[],"films":[{"_id":"642f3a478e6fd86616fdf425","src":"/videos/642f3a3c8e6fd86616fdf422.mp4","width":1920,"height":1080,"duration":5455.125333,"thumbnail":"/images/642f3a468e6fd86616fdf424.jpg"}],"createdAt":"2023-04-06T21:15:34.883Z","updatedAt":"2023-04-20T17:34:04.416Z","origName":"Murder Mystery","shortDesc":"Ник и Одри Шпиц — теперь уже владельцы своего детективного агентства — расследуют важное для их карьеры дело о похищении друга-миллиардера с его собственной свадьбы.","fullDesc":"Ник и Одри Шпиц — теперь уже владельцы своего детективного агентства — расследуют важное для их карьеры дело о похищении друга-миллиардера с его собственной свадьбы.","dateReleased":"2023-03-31","ageLevel":12,"categoryAlias":"films","logo":{"_id":"642f38428e6fd86616fdf3cf","src":"/images/642f38428e6fd86616fdf3d0.png"},"trailer":{"_id":"642f38728e6fd86616fdf40d","src":"/videos/642f38728e6fd86616fdf40a.mp4","thumbnail":"/images/642f38728e6fd86616fdf40c.jpg"},"alias":"ubiystvo-v-parizhe","publishedAt":"2023-04-20T17:34:04.414Z","cover":{"_id":"642f587f8e6fd86616fe0773","src":"/images/642f587f8e6fd86616fe0774.jpg"},"poster":{"_id":"642f5f6a8e6fd86616fe097d","src":"/images/642f5f6a8e6fd86616fe097e.jpg"},"raisedUpAt":"2023-04-20T17:34:04.414Z"}}}}}}}}},"/admin/movies/raiseUp":{"put":{"summary":"Админ-панель > Опубликовать / снять с публикации запись (фильм или сериал )","tags":["Admin"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id документа(фильма или сериала) (mongoose.ObjectId)","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id документа(фильма или сериала) (mongoose.ObjectId)"},"type":{"type":"string","description":"Надпись \"success\""},"publishedAt":{"type":"date","description":"Дата публикации"},"alert":{"type":"boolean","description":true},"msg":{"type":"string","description":"Успешно опубликовано"}},"example":{"type":"success","_id":"6499bdbe9c45fd3d06d89094","publishedAt":"2023-06-26T16:36:31.403Z","alert":true,"msg":"Успешно опубликовано"}}}}}}}},"/admin/movies/publish":{"put":{"summary":"Админ-панель >  Поднять медиа страницу во всех списках","tags":["Admin"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id документа(фильма или сериала) (mongoose.ObjectId)","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id документа(фильма или сериала) (mongoose.ObjectId)"},"type":{"type":"string","description":"Надпись \"success\""},"raisedUpAt":{"type":"date","description":"Дата поднятия в списке ( устанавливается как значение текущей даты)"},"alert":{"type":"boolean","description":true},"msg":{"type":"string","description":"Успешное поднятие"}},"example":{"type":"success","_id":"6499bdbe9c45fd3d06d89094","raisedUpAt":"2023-06-26T16:36:31.403Z","alert":true,"msg":"Успешное поднятие"}}}}}}}},"/admin/payment":{"get":{"summary":"Админ-панель > История пополнений","tags":["Admin"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"query","schema":{"type":"number"},"description":"Для поиска документов (сущностей таблицы users), с которыми совпадают символы в имени и емейлу. Либо для полного совпадения по id (mongoose.ObjectId)  пользователя"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"tariffsStats":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Tariff id"},"name":{"type":"string","description":"название тарифа"},"duration":{"type":"number","description":"длительность тарифа"},"totalWithdrawAmount":{"type":"number","description":"Сумма всех пополнений"},"activeSubscriptions":{"type":"number","description":"Количество действующих подписок"},"activationsSubscriptions":{"type":"number","description":"Количество активаций подписок"}}}},"totalWithdrawAmount":{"type":"number","description":"Сумма всех пополнений"},"totalSize":{"type":"number","description":"Всего записей"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id записи оплаты ( пополнения )"},"updatedAt":{"type":"data","description":"Дата обновления"},"finishAt":{"type":"data","description":"Дата окончания"},"startAt":{"type":"data","description":"Дата начала"},"withdrawAmount":{"type":"number","description":"Сумма пополнения"},"tariff":{"description":"Информация об tariff","type":"object","properties":{"name":{"type":"string","description":"Название тарифа"}}},"user":{"description":"Информация о пользователе","type":"object","properties":{"_id":{"type":"string","description":"Id пользователя"},"email":{"type":"string","description":"Почта пользователя"},"avatar":{"type":"string","description":"Название тарифа","required":false},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}}}}}}}},"example":{"tariffsStats":[{"_id":"63f7537f841f04f2348f8de5","name":"7 дней","duration":604800000,"totalWithdrawAmount":0,"activeSubscriptions":0,"activationsSubscriptions":332},{"_id":"63dbda927f457bc81bc920c4","name":"14 дней","duration":1209600000,"totalWithdrawAmount":0,"activeSubscriptions":0,"activationsSubscriptions":70},{"_id":"63dbe11e7f457bc81bc920c9","name":"1 месяц","duration":2592000000,"totalWithdrawAmount":10953,"activeSubscriptions":0,"activationsSubscriptions":65},{"_id":"63dbe1447f457bc81bc920ca","name":"3 месяца","duration":7776000000,"totalWithdrawAmount":3493,"activeSubscriptions":2,"activationsSubscriptions":243},{"_id":"63dbe1687f457bc81bc920cb","name":"6 месяцев","duration":15552000000,"totalWithdrawAmount":42253,"activeSubscriptions":77,"activationsSubscriptions":77}],"totalWithdrawAmount":0,"totalSize":113,"items":[{"_id":"64295d840f99cfdac6fd0554","updatedAt":"2023-04-02T10:50:34.005Z","finishAt":"2023-05-02T10:50:34.005Z","startAt":"2023-04-02T10:50:34.005Z","withdrawAmount":199,"tariff":{"name":"1 месяц"},"user":{"_id":"641fe31ed533d298c07e0fcb","email":"luisoid1972@yandex.ru","avatar":null,"firstname":"Людмила","subscribe":{"startAt":"2023-04-02T10:50:34.005Z","finishAt":"2023-05-02T10:50:34.005Z","tariffId":"63dbe11e7f457bc81bc920c9"}}},{"_id":"642865c00f99cfdac6fcda97","updatedAt":"2023-04-01T17:14:55.945Z","finishAt":"2023-09-28T17:14:55.944Z","startAt":"2023-04-01T17:14:55.944Z","withdrawAmount":899,"tariff":{"name":"6 месяцев"},"user":{"_id":"642865ae0f99cfdac6fcda7d","email":"kemgai@yandex.ru","avatar":"/images/642865ae0f99cfdac6fcda7c.jpg","firstname":"Камиля","subscribe":{"startAt":"2023-04-01T17:14:55.944Z","finishAt":"2023-09-28T17:14:55.944Z","tariffId":"63dbe1687f457bc81bc920cb"}}},{"_id":"642726ba0f99cfdac6fc91a2","updatedAt":"2023-03-31T18:30:54.545Z","finishAt":"2023-04-30T18:30:54.545Z","startAt":"2023-03-31T18:30:54.545Z","withdrawAmount":199,"tariff":{"name":"1 месяц"},"user":{"_id":"642725cc0f99cfdac6fc914c","email":"ritawna@yandex.ru","avatar":"/images/642725cc0f99cfdac6fc914b.jpg","firstname":"Рита","subscribe":{"startAt":"2023-03-31T18:30:54.545Z","finishAt":"2023-04-30T18:30:54.545Z","tariffId":"63dbe11e7f457bc81bc920c9"}}}]}}}}}}}},"/admin/movieEditor":{"get":{"summary":"Админ-панель > Редактор медиа страницы","tags":["Admin"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"S3_UPLOAD_KEY":{"type":"string","description":"S3_UPLOAD_KEY"},"S3_UPLOAD_SECRET":{"type":"string","description":"S3_UPLOAD_SECRET"},"S3_UPLOAD_REGION":{"type":"string","description":"S3_UPLOAD_REGION"},"S3_UPLOAD_BUCKET":{"type":"string","description":"S3_UPLOAD_BUCKET"},"S3_UPLOAD_ENDPOINT":{"type":"string","description":"S3_UPLOAD_ENDPOINT"}},"example":{"S3_UPLOAD_KEY":"qq11111","S3_UPLOAD_SECRET":"1f2bc3bae45f6e78d675a0c1e8f069gf","S3_UPLOAD_REGION":"ru-1","S3_UPLOAD_BUCKET":"1feab2ee-e3456789-123b-12f3-45a6-12345q123q1q","S3_UPLOAD_ENDPOINT":"https://any_url.com"}}}}}}},"delete":{"summary":"Админ-панель > Удаление страницы и всех ее медиа материалов","tags":["Admin"],"parameters":[{"in":"query","name":"_id","schema":{"type":"string"},"description":"Id фильма или сериала (mongoose.ObjectId)"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Надпись \"success\""},"alert":{"type":"boolean","description":"Значение true"},"_id":{"type":"string","description":"Id удаленного фильма или сериала (mongoose.ObjectId)"},"msg":{"type":"string","description":"Надпись \"Успешно удалено\""}},"example":{"type":"success","alert":true,"id":"63ac7d6ab2c93ed221218186","msg":"Успешно удалено"}}}}}}}},"/admin/movieEditor/image":{"post":{"summary":"Админ-панель > Загрузка обложки, постера или логотипа","tags":["Admin"],"parameters":[{"in":"query","name":"name","schema":{"type":"string"},"description":"Либо cover(обложка),  либо poster(постер), либ logo(логотип)"},{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id фильма или сериала (mongoose.ObjectId)"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"Исходник сам файл картинки (обложки, постера или логотипа)"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"alert":{"type":"boolean","description":true},"_id":{"type":"boolean","description":"Id картинки(обложки, постера или логотипа) (mongoose.ObjectId)"},"src":{"type":"string","description":"путь к картинке"},"msg":{"type":"string","description":"успешно сохранено"}},"example":{"type":"success","movieId":"63ac7d6ab2c93ed221218186","alert":true,"_id":"64a1a383c83c74a452bc97fe","src":"/images/64a1a383c83c74a452bc97ff.png","msg":"Успешно сохранено"}}}}}}},"delete":{"summary":"Админ-панель > Удаление изображений","tags":["Admin"],"parameters":[{"in":"query","name":"name","schema":{"type":"string"},"description":"Либо cover(обложка),  либо poster(постер), либ logo(логотип)"},{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id фильма или сериала (mongoose.ObjectId)"},{"in":"query","name":"_id","schema":{"type":"string"},"description":"Id серии (mongoose.ObjectId)  (Для сериалов (query параметр name = series ))"},{"in":"query","name":"seasonKey","schema":{"type":"string"},"description":"Номер сезона в массиве сезонов начиная с нуля  (Для сериалов (query параметр name = series ))"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Надпись \"success\""},"alert":{"type":"boolean","description":"Значение true"},"msg":{"type":"string","description":"Надпись \"Успешно удалено\""}},"example":{"type":"success","alert":true,"msg":"Успешно удалено"}}}}}}}},"/admin/movieEditor/video":{"post":{"summary":"Админ-панель > Загрузка видео и миниатюры","tags":["Admin"],"parameters":[{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id фильма или сериала (mongoose.ObjectId)"},{"in":"query","name":"name","schema":{"type":"string"},"description":"Название того поля (объекта),  значение полей которого изменяются. Может быть лио trailer, либо films, либо series"},{"in":"query","name":"duration","schema":{"type":"string"},"description":"Длительность видео в секундах (?)"},{"in":"query","name":"qualities","schema":{"type":"string"},"description":"Строка в которой через запятую перечислены возможные качества отображения?"},{"in":"query","name":"_id","schema":{"type":"string"},"description":"Id серии (mongoose.ObjectId)  (Для сериалов (query параметр name = series ))"},{"in":"query","name":"seasonKey","schema":{"type":"string"},"description":"Номер сезона в массиве сезонов начиная с нуля  (Для сериалов (query параметр name = series ))"},{"in":"query","name":"episodeKey","schema":{"type":"string"},"description":"Номер серии в массиве серий начиная с нуля   (Для сериалов (query параметр name = series ))"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"_id":{"type":"string","description":"Уникальный ID ( настроек видео???) от базы данных полученный как new mongoose.Types.ObjectId();"},"duration":{"type":"number","description":"Длительность видео в секундах"},"src":{"type":"string","description":"Путь к исходнику видео"},"thumbnail":{"type":"string","description":"Путь к исходнику миниатюры ( кара из видео - картинки)"}},"example":{"type":"success","movieId":"63b68788bada9539c72ff69f","_id":"64a1c56f9003e28542ab8ac6","duration":2479,"src":"/videos/64a1c56f9003e28542ab8ac7","thumbnail":"/images/64a1c56f9003e28542ab8ac8.jpg"}}}}}}},"delete":{"summary":"Админ-панель > Удаление видео","tags":["Admin"],"parameters":[{"in":"query","name":"name","schema":{"type":"string"},"description":"Либо trailer,  либо films, либо series"},{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id фильма или сериала (mongoose.ObjectId)"},{"in":"query","name":"_id","schema":{"type":"string"},"description":"Id серии (mongoose.ObjectId)  (Для сериалов (query параметр name = series )) ЛИБО Id фильма(mongoose.ObjectId)  (Для фильмов (query параметр name = films ))"},{"in":"query","name":"seasonKey","schema":{"type":"string"},"description":"Номер сезона в массиве сезонов начиная с нуля  (Для сериалов (query параметр name = series ))"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Надпись \"success\""},"alert":{"type":"boolean","description":"Значение true"},"msg":{"type":"string","description":"Надпись \"Успешно удалено\""}},"example":{"type":"success","alert":true,"msg":"Успешно удалено"}}}}}}}},"/admin/searchHistory":{"get":{"summary":"Админ-панель > История поиска","tags":["Admin"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"query","schema":{"type":"number"},"description":"Для поиска документов (сущностей коллекции users), с которыми совпадают символы в имени и емейлу. Либо для полного совпадения по id (mongoose.ObjectId)  пользователя"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД (документов коллекции users)"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) поискового запроса (документа коллекции searchlogs)"},"query":{"type":"string","description":"Запрос пользователя"},"device":{"type":"object","properties":{"ip":{"type":"string","description":"ip адресс юзера"},"os":{"type":"string","description":"Операционная система устройства"},"isBot":{"type":"boolean","description":"Является ли юзер ботом"},"isMobile":{"type":"boolean","description":"Является ли дейвайс мобильным устройством"},"isDesktop":{"type":"boolean","description":"Является ли дейвайс десктопным устройством"},"browser":{"type":"string","description":"Название браузера"},"version":{"type":"string","description":"Версия браузера"},"platform":{"type":"string","description":"Платформа устройства ( ос)"}}},"updatedAt":{"type":"Date","description":"Дата обновления"},"user":{"type":"object","properties":{"_id":{"type":"string","description":"Profile id"},"email":{"type":"string","description":"Email user"},"avatar":{"type":"string","description":"Path to img src profile user"},"firstname":{"type":"string","description":"Имя этого человека"},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}}}}}}}},"example":{"value":{"totalSize":1539,"items":[{"_id":"63e7ee8b5c8c77c4bcc63003","query":"Ход королевы","device":{"ip":"84.16.240.69","os":"OS X","isBot":false,"isMobile":true,"isDesktop":false,"browser":"Safari","version":"15.3","platform":"iPhone"},"updatedAt":"2023-02-11T19:37:47.982Z","user":{"_id":"63c85dad6396809788dfb949","email":"khanrushlg@yandex.ru","avatar":null,"firstname":"Рушан","subscribe":{"startAt":"2023-02-12T04:39:28.501Z","finishAt":"2023-05-13T04:39:28.501Z","tariffId":"63dbe1447f457bc81bc920ca"}}},{"_id":"63e7ee885c8c77c4bcc62ff5","query":"Х","device":{"ip":"84.16.240.69","os":"OS X","isBot":false,"isMobile":true,"isDesktop":false,"browser":"Safari","version":"15.3","platform":"iPhone"},"updatedAt":"2023-02-11T19:37:44.853Z","user":{"_id":"63c85dad6396809788dfb949","email":"khanrushlg@yandex.ru","avatar":null,"firstname":"Рушан","subscribe":{"startAt":"2023-02-12T04:39:28.501Z","finishAt":"2023-05-13T04:39:28.501Z","tariffId":"63dbe1447f457bc81bc920ca"}}}]}}}}}}}}},"/admin/moviesRatingHistory":{"get":{"summary":"Админ-панель > История рейтингов","tags":["Admin"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"query","schema":{"type":"number"},"description":"Для поиска документов (сущностей коллекции users), с которыми совпадают символы в имени и емейлу. Либо для полного совпадения по id (mongoose.ObjectId)  пользователя"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД (документов коллекции users)"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) оценки фильма пользователем (документа коллекции MovieRating)"},"rating":{"type":"number","description":"Оценка фильма пользователем"},"createdAt":{"type":"Date","description":"Дата создания"},"updatedAt":{"type":"Date","description":"Дата обновления"},"movie":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к постеру (файлу картинке)"}}}}},"user":{"type":"object","properties":{"_id":{"type":"string","description":"Profile id"},"email":{"type":"string","description":"Email user"},"avatar":{"type":"string","description":"Path to img src profile user"},"firstname":{"type":"string","description":"Имя этого человека"},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}},"role":{"type":"string","description":"Admin, manager или если это обычный пользователь то это поле отсуствует."}}}}}}},"example":{"value":{"totalSize":189,"items":[{"_id":"6489f001a2871402bdd31351","rating":7,"createdAt":"2023-06-14T16:51:13.791Z","updatedAt":"2023-06-14T16:51:13.791Z","__v":0,"movie":{"name":"Выстрел в сердце","poster":{"src":"/images/641f44d1944e8bd192d18c57.jpg"}},"user":{"_id":"63bbed7523c814afb608a3f6","email":"evlevelx@yandex.ru","avatar":"/images/64808068904d20e5d4c1b555.jpg","firstname":"Евгений","subscribe":{"startAt":"2023-03-22T10:17:28.873Z","finishAt":"2023-09-18T10:17:28.873Z","tariffId":"63dbe1687f457bc81bc920cb"},"role":"admin"}},{"_id":"6489efa0a2871402bdd31003","rating":6,"createdAt":"2023-06-14T16:49:36.628Z","updatedAt":"2023-06-14T16:49:36.628Z","__v":0,"movie":{"name":"Битва при Нарвике: Первое поражение Гитлера","poster":{"src":"/images/640376060a569a75e1507a94.jpg"}},"user":{"_id":"63bbed7523c814afb608a3f6","email":"evlevelx@yandex.ru","avatar":"/images/64808068904d20e5d4c1b555.jpg","firstname":"Евгений","subscribe":{"startAt":"2023-03-22T10:17:28.873Z","finishAt":"2023-09-18T10:17:28.873Z","tariffId":"63dbe1687f457bc81bc920cb"},"role":"admin"}}]}}}}}}}}},"/admin/moviesViewingHistory":{"get":{"summary":"Админ-панель > История просмотров","tags":["Admin"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"},{"in":"query","name":"query","schema":{"type":"number"},"description":"Для поиска документов (сущностей коллекции movies), с которыми совпадают символы по названию фильма."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД (документов коллекции users)"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) просмотра (документа коллекции MoviePageLog)"},"device":{"type":"object","properties":{"ip":{"type":"string","description":"ip адресс юзера"},"os":{"type":"string","description":"Операционная система устройства"},"isBot":{"type":"boolean","description":"Является ли юзер ботом"},"isMobile":{"type":"boolean","description":"Является ли дейвайс мобильным устройством"},"isDesktop":{"type":"boolean","description":"Является ли дейвайс десктопным устройством"},"browser":{"type":"string","description":"Название браузера"},"version":{"type":"string","description":"Версия браузера"},"platform":{"type":"string","description":"Платформа устройства ( ос)"}}},"endTime":{"type":"number","description":"Секунда фильма или сериии на которой пользователь закончил свой просмотр"},"videoId":{"type":"string","description":"Id видео (mongoose.ObjectId)"},"updatedAt":{"type":"Date","description":"Дата обновления"},"movie":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к постеру (файлу картинке)"}}}}},"user":{"type":"object","properties":{"_id":{"type":"string","description":"Profile id"},"email":{"type":"string","description":"Email user"},"avatar":{"type":"string","description":"Path to img src profile user"},"firstname":{"type":"string","description":"Имя этого человека"},"subscribe":{"type":"object","description":"Информация по подписке. Если подписки нет, в этом поле null","properties":{"startAt":{"type":"Date","description":"Дата начала подписки"},"finishAt":{"type":"Date","description":"Дата окончания подписки"},"tariffId":{"type":"string","description":"Id тарифа (mongoose.ObjectId)"}}},"role":{"type":"string","description":"Admin, manager или если это обычный пользователь то это поле отсуствует."}}}}}}},"example":{"value":{"totalSize":3597,"items":[{"_id":"6480ac082fc38dca8042a40c","device":{"ip":"::ffff:127.0.0.1","os":"Linux 64","isBot":false,"isMobile":false,"isDesktop":true,"browser":"Chrome","version":"103.0.0.0","platform":"Linux"},"endTime":0,"videoId":"64020a490a569a75e1500a05","updatedAt":"2023-06-07T16:15:48.503Z","movie":{"name":"Энола Холмс","poster":{"src":"/images/6402045f0a569a75e15008a0.jpg"}},"user":{"_id":"6480807e904d20e5d4c1b6db","email":"7on999@gmail.com","avatar":null,"firstname":"Семён 12","subscribe":{"startAt":"2023-06-07T15:33:23.068Z","finishAt":"2023-12-04T15:33:23.068Z","tariffId":"63dbe1687f457bc81bc920cb"},"role":"admin"}},{"_id":"642e72988e6fd86616fdc4e8","device":{"ip":"88.204.53.65","os":"Windows 10.0","isBot":false,"isMobile":false,"isDesktop":true,"browser":"Chrome","version":"111.0.0.0","platform":"Microsoft Windows"},"endTime":2.286678,"videoId":"64020a490a569a75e1500a05","updatedAt":"2023-04-06T12:09:07.205Z","movie":{"name":"Энола Холмс","poster":{"src":"/images/6402045f0a569a75e15008a0.jpg"}},"user":{"_id":"642c4f828e6fd86616fd8a08","email":"yazloysasha@yandex.ru","avatar":null,"firstname":"Саша","subscribe":{"startAt":"2023-04-04T16:26:45.674Z","finishAt":"2023-10-01T16:26:45.674Z","tariffId":"63dbe1687f457bc81bc920cb"},"role":"admin"}}]}}}}}}}}},"/collections":{"get":{"summary":"Подборки и жанры для главной страницы","tags":["Collections"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","uniqueItems":true,"minItems":6,"items":{"type":"object","properties":{"type":{"type":"string","required":false,"description":"Тип подборки фильмов или сериалов. Может быть 'carousel'(карусель - самые популярные), 'new'(новинки) или отсутствовать."},"name":{"type":"string","required":false,"description":"Название жанра ( если поле type отсутствует. ) Или же для подборки новинок ( type = new) name = 'Новинки.', для type= carousel это поле отсутствует"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"shortDesc":{"type":"string","description":"Краткое описание"},"ageLevel":{"type":"string","description":"Возрастное ограничение","required":false},"dateReleased":{"type":"Date","description":"Дата релиза","required":false},"categoryAlias":{"type":"string","description":"Вид категориию. Может быть films, serials или collections","required":false},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность","poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}}}}},"poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10","required":false},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму"},"genreName":{"type":"string","description":"Жанр фильма","required":false},"logo":{"type":"object","required":false,"properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению логотипа"}}},"cover":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению обложки"}}}}}}}}},"examples":{"example":{"value":[{"type":"carousel","items":[{"name":"Армия воров 3","shortDesc":"В этом приквеле «Армии мертвецов» загадочная женщина нанимает банковского служащего Дитера, чтобы тот помог взломать три легендарных сейфа в разных частях Европы.","ageLevel":16,"dateReleased":"2021-10-28","categoryAlias":"films","duration":0,"url":"/p/armiya-vorov","genreName":"Боевики","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}},{"name":"Битва при Нарвике: Первое поражение Гитлера","shortDesc":"На фоне сражения во Второй мировой войне, известного как первое поражение Гитлера, норвежский солдат возвращается домой и узнает шокирующую правду о своей жене","ageLevel":16,"dateReleased":"2022-12-15","categoryAlias":"films","cover":{"src":"/images/640376080a569a75e1507aad.jpg"},"rating":6,"duration":6546.833333,"url":"/p/bitva-pri-narvike-pervoe-porazhenie-gitlera","genreName":"Драмы","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}}]},{"name":"Новинки","type":"new","items":[{"name":"Выстрел в сердце","poster":{"src":"/images/641f44d1944e8bd192d18c57.jpg"},"shortDesc":"На фоне сражения во Второй мировой войне, известного как первое поражение Гитлера, норвежский солдат возвращается домой и узнает шокирующую правду о своей жене","rating":7,"duration":1163.416667,"url":"/p/vystrel-v-serdce","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}},{"name":"Вундеркинды","poster":{"src":"/images/642f5e208e6fd86616fe08d5.jpg"},"duration":18578.069334,"url":"/p/vunderkindy","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}}]},{"name":"Триллеры","items":[{"name":"Затерянная в метели","shortDesc":"Маленькая девочка пропадает во время парада в Малаге, и молодая журналистка решает во что бы то ни стало помочь родителям найти дочь","poster":{"src":"/images/641e0dd00073f02ab65e7213.jpg"},"duration":0,"url":"/p/zateryannaya-v-meteli","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}},{"name":"Ты","poster":{"src":"/images/641c0ac60073f02ab65de349.jpg"},"rating":10,"duration":115970.58333200001,"url":"/p/ty","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}}]},{"name":"Мюзиклы","items":[{"name":"Ну разве не романтично?","shortDesc":"Архитектор, которая не верит в романтику, ударяется головой и обнаруживает, что ее непримечательная жизнь превратилась в яркую, полную клише романтическую комедию","poster":{"src":"/images/642f44cf8e6fd86616fdfc87.jpg"},"duration":5334.144,"url":"/p/nu-razve-ne-romantichno","trailer":{"_id":"642f44d68e6fd86616fdfcbe","src":"/videos/642f44d68e6fd86616fdfcbb.mp4","thumbnail":"/images/642f44d68e6fd86616fdfcbd.jpg"}},{"name":"тик-так… БУМ!","shortDesc":"На пороге тридцатилетия многообещающий театральный композитор пытается разобраться с любовью и дружбой и жаждет создать нечто великое, пока еще есть время","poster":{"src":"/images/63bd03db23c814afb608cbab.jpg"},"duration":7296.416667,"url":"/p/tik-tak-bum","trailer":{"_id":"63bd03e223c814afb608cbd7","src":"/videos/63bd03e223c814afb608cbd6.mp4","thumbnail":"/images/63bd03e223c814afb608cbd8.jpg"}}]}]}}}}}}}},"/collections/continueWatching":{"get":{"summary":"Подборка \"продолжить просмотр\"","tags":["Collections"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество документов"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id (mongoose.ObjectId) просмотра (документа коллекции MoviePageLog)"},"endTime":{"type":"number","description":"Время окончания просмотра фильма в секундах"},"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)","required":true},"videoId":{"type":"string","description":"Id видео (mongoose.ObjectId)"},"updatedAt":{"type":"string","description":"Дата обновления просмотра от пользователя"},"movie":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма/сериала"},"alias":{"type":"string","description":"alias фильма/сериала"},"categoryAlias":{"type":"string","description":"Категория - serials или films"},"filmDuration":{"type":"number","description":"Длительность фильма","required":false},"poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению постера"}}},"cover":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению обложки"}}}}},"seriaInfo":{"type":"object","required":false,"properties":{"season":{"type":"number","description":"Номер сезона"},"episode":{"type":"number","description":"Номер серии"},"seriaDuration":{"type":"number","description":"Длительность серии"}}}}}}},"example":{"value":{"totalSize":29,"items":[{"_id":"64e8801f6ffabb5ba3d15704","endTime":4.710858,"movieId":"64d7871e047dca3ed1b82899","videoId":"64d787a8047dca3ed1b82cc2","updatedAt":"2023-08-25T10:19:11.336Z","movie":{"name":"Сериал тест hls","alias":"serial-test-hls","categoryAlias":"serials"},"seriaInfo":{"season":2,"episode":1,"seriaDuration":4170}},{"_id":"64e87d576ffabb5ba3d14f03","endTime":3.636435,"movieId":"64d7871e047dca3ed1b82899","videoId":"64d787a8047dca3ed1b82cc1","updatedAt":"2023-08-25T10:07:19.935Z","movie":{"name":"Сериал тест hls","alias":"serial-test-hls","categoryAlias":"serials"},"seriaInfo":{"season":1,"episode":2,"seriaDuration":4170}},{"_id":"64e72f736ffabb5ba3ce617d","endTime":8.443566,"movieId":"64b64f423d8baf6888235f9c","videoId":"64e72ed2ea4ca856d3ab6fc6","updatedAt":"2023-08-24T10:22:43.628Z","movie":{"name":"Тестовый фильм название","alias":"just-test","categoryAlias":"films","filmDuration":4170},"seriaInfo":null}]}}}}}}}}},"/collections/possibleYouLike":{"get":{"summary":"Подборка - \"возможно вам понравится\"","tags":["Collections"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Кол-во пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество документов"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма/сериала"},"_id":{"type":"string","description":"Id (mongoose.ObjectId) просмотра (документа коллекции Movies)"},"duration":{"type":"number","description":"Длительность"},"url":{"type":"string","description":"Url к фильму"},"poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению обложки"}}},"cover":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению обложки"}}}}}}},"example":{"value":{"totalSize":389,"items":[{"_id":"63b9a9934b33357ef7068057","name":"Как я стал супергероем","poster":{"_id":"63ba2c404b33357ef70698bb","src":"/images/63ba2c404b33357ef70698bc.jpg"},"cover":{"_id":"63ba2cdc4b33357ef70698d4","src":"/images/63ba2cdc4b33357ef70698d5.jpg"},"duration":6063.791667,"url":"/p/kak-ya-stal-supergeroem"},{"_id":"63b866da4b33357ef7063e22","name":"Обитатели холмов","poster":{"_id":"63c3d0c61c98adb3690e02d8","src":"/images/63c3d0c61c98adb3690e02d9.jpg"},"cover":{"_id":"63c3d0c71c98adb3690e02f1","src":"/images/63c3d0c71c98adb3690e02f2.jpg"},"duration":12246.25,"url":"/p/obitateli-holmov"},{"_id":"63dcfff61311449b80d87352","name":"Академия Амбрелла","cover":{"_id":"63e6c7025c8c77c4bcc60b48","src":"/images/63e6c7025c8c77c4bcc60b49.jpg"},"poster":{"_id":"63e6c6ee5c8c77c4bcc60b2b","src":"/images/63e6c6ee5c8c77c4bcc60b2c.jpg"},"duration":61911.583333,"url":"/p/akademiya-ambrella"}]}}}}}}}}},"/catalog":{"get":{"summary":"Подборки и жанры для главной страницы","tags":["Catalog"],"parameters":[{"in":"query","name":"sort","schema":{"type":"string"},"description":"Установление сортировки списка. Либо new, либо rating."},{"in":"query","name":"genreAlias","schema":{"type":"string"},"description":"Жанр фильма или сериала"},{"in":"query","name":"dateReleased","schema":{"type":"string"},"description":"Год даты релиза."},{"in":"query","name":"categoryAlias","schema":{"type":"string"},"description":"Вид категориии. Может быть films, serials или collections"},{"in":"query","name":"rating","schema":{"type":"number"},"description":"Рейтинг фильма"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей в БД"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"Date","description":"Дата релиза"},"categoryAlias":{"type":"string","description":"Вид категориию. Может быть films, serials или collections"},"shortDesc":{"type":"string","description":"Краткое описание"},"genresNames":{"type":"array","description":"Cписок жанров на русском","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность","poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}}}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10","required":false},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму"},"series":{"type":"array","description":"Массивы первого уровня - сезоны, в каждом из которых вложенные подмассивы -список серий. Это поле есть в ответе только если query параметр categoryAlias = serials","uniqueItems":true,"minItems":0,"items":{"type":"array","description":"Список серий","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id cерии (mongoose.ObjectId)"},"src":{"type":"string","description":"Источник на файл ( путь к исходнику )"},"duration":{"type":"number","description":"Продолжительность серии"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"}}}}}}}}},"example":{"value":{"totalSize":3597,"items":[{"name":"Армия воров 3","ageLevel":16,"dateReleased":"2021-10-28","categoryAlias":"films","shortDesc":"В этом приквеле «Армии мертвецов» загадочная женщина нанимает банковского служащего Дитера, чтобы тот помог взломать три легендарных сейфа в разных частях Европы.","genresNames":["Драмы","Военные","Исторические"],"duration":0,"url":"/p/armiya-vorov","series":[[{"_id":"64732eecfa87aa4b70851c64","duration":155.738333,"src":"/videos/64732eecfa87aa4b70851c65","thumbnail":"/images/64732eecfa87aa4b70851c66.jpg"}]]},{"name":"Битва при Нарвике: Первое поражение Гитлера","shortDesc":"Притворяясь богатым и успешным бриллиантовым магнатом, он обольщал женщин в интернете, а потом выманивал у них миллионы долларов. Теперь его жертвы обдумывают план мести.","ageLevel":16,"dateReleased":"2022-12-15","categoryAlias":"films","poster":{"src":"/images/640376060a569a75e1507a94.jpg"},"rating":6,"duration":6546.833333,"url":"/p/bitva-pri-narvike-pervoe-porazhenie-gitlera","trailer":{"_id":"63ba2ad54b33357ef706971c","src":"/videos/63ba2ad54b33357ef706971b.mp4","thumbnail":"/images/63ba2ad54b33357ef706971d.jpg"},"genresNames":["Боевики","Криминал"],"series":[[{"_id":"64732eecfa87aa4b70851c64","duration":155.738333,"src":"/videos/64732eecfa87aa4b70851c65","thumbnail":"/images/64732eecfa87aa4b70851c66.jpg"}]]}]}}}}}}}}},"/catalog/pages":{"get":{"summary":"Страницы для рендеринга при сборке","tags":["Catalog"],"parameters":[{"in":"query","name":"showGenreName","schema":{"type":"string"},"description":"Жанр фильма или сериала","required":false},{"in":"query","name":"categoryAlias","required":false,"schema":{"type":"string"},"description":"Вид категориии. Может быть films, serials или collections"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","uniqueItems":true,"minItems":6,"items":{"type":"object","properties":{"dateReleased":{"type":"string","description":"Дата выпуска","required":false},"categoryAlias":{"required":true,"type":"string","description":"Вид категориию. Может быть films, serials"},"genreAlias":{"type":"string","description":"Жанр","required":false}}}},"examples":{"example":{"value":[{"genreAlias":"korotkometrazhki","dateReleased":"2022","categoryAlias":"films"},{"genreAlias":"kriminal","dateReleased":"2017","categoryAlias":"serials"},{"categoryAlias":"films"},{"categoryAlias":"serials"},{"dateReleased":"2022","categoryAlias":"serials"},{"dateReleased":"2018","categoryAlias":"films"}]}}}}}}}},"/sitemap":{"get":{"summary":"Данные для sitemap.xml. Получение списка всех ссылок","tags":["Sitemap"],"responses":{"200":{"description":"OK","content":{"text/xml":{"schema":{"$ref":"#/definitions/XmlSiteMapModel"}}}}}}},"/payment/tariffs":{"get":{"summary":"Тарифы, создание и обработка платежей","tags":["Payment"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"tariffs":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id тарифа"},"name":{"type":"string","description":"Название тарифа"},"price":{"type":"number","description":"Цена тарифа"},"duration":{"type":"number","descripton":"Длительность подписки в мили секундах"},"discount":{"type":"number","description":"Cкидка"},"sort":{"type":"number","description":"Сорт тарифа ( номер для сортировки )"},"allowSubscribe":{"type":"boolean","description":"Позволена ли подписка"},"finishOfSubscriptionIn":{"type":"string","description":"Финиш подписки"}}}},"popularMovies":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"}}}}},"example":{"value":{"tariffs":[{"_id":"63f7537f841f04f2348f8de5","name":"7 дней","price":0,"duration":604800000,"sort":0,"allowSubscribe":false},{"_id":"63dbe11e7f457bc81bc920c9","name":"1 месяц","price":199,"duration":2592000000,"sort":2,"allowSubscribe":false},{"_id":"63dbe1687f457bc81bc920cb","name":"6 месяцев","price":899,"duration":15552000000,"discount":25,"sort":4,"allowSubscribe":false,"finishOfSubscriptionIn":"2023-12-04T15:33:23.068Z"}],"popularMovies":[{"name":"Белый шум","poster":{"src":"/images/6405fe000a569a75e15129f4.jpg"}},{"name":"Армия воров","poster":{"src":"/images/63ac7d7fb2c93ed2212181a8.jpg"},"rating":10},{"name":"Уэнделл и Уайлд","poster":{"src":"/images/63ad6f76b2c93ed22121a059.jpg"}}]}}}}}}}}},"/payment/createPayment":{"post":{"summary":"Загрузка платежа","tags":["Payment"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"successURL":{"type":"string","description":"Url адрес успешной страницы для оплаты подписки"},"selectedTariffId":{"type":"string","description":"Id (mongoose.ObjectId) документа коллекции tariffs (выбранного тарифа)"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"urlOfRedirectToPay":{"type":"string","description":"URL успшеной страницы для оплаты подписки с установленными query параметрами с помощью свойства searchParams экземеляра класса URL"}},"example":{"urlOfRedirectToPay":"https://dzen.ru/?yredirect=true&utm_referer=www.google.com&id=64a858371616a1286efe30c9"}}}}}}}},"/payment/notification":{"post":{"summary":"Обработка уведомления от платежной системы о совершении платежа","tags":["Payment"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"label":{"type":"string","description":"Id(mongoose.ObjectId) записи платежа -  документа коллекции paymentLog. Этот же параметр - Метка платежа. Если метки у платежа нет, параметр содержит пустую строку.(документация онлайн кассы)"},"sender":{"type":"number","description":"Для переводов из кошелька — номер счета отправителя. Для переводов с произвольной карты — параметр содержит пустую строку."},"amount":{"type":"number","description":"Сумма операции."},"codepro":{"type":"boolean","description":"1 из параметров для формирования hash. Признак того, что перевод защищен кодом протекции. В ЮMoney больше нельзя делать переводы с кодом протекции, поэтому параметр всегда имеет значение false."},"currency":{"type":"string","description":"Код валюты счета пользователя. Всегда 643 (рубль РФ согласно ISO 4217)."},"datetime":{"type":"string","description":"Дата и время совершения перевода."},"sha1_hash":{"type":"string","description":"SHA-1 hash параметров уведомления"},"operation_id":{"type":"string","description":"Идентификатор операции в истории счета получателя."},"withdraw_amount":{"type":"number","description":"Сумма, которая списана со счета отправителя."},"notification_type":{"type":"string","description":"Для переводов из кошелька — p2p-incoming. Для переводов с произвольной карты — card-incoming."}}}}}},"responses":{"200":{"description":"OK"}}}},"/payment/success":{"get":{"summary":"Показать пользователю страницу об успешном совершении платежа","tags":["Payment"],"parameters":[{"in":"query","name":"id","schema":{"type":"string"},"description":"Id (mongoose.ObjectId) документа коллекции PaymentLog"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id(mongoose.ObjectId) записи платежа -  документа коллекции paymentLog"},"type":{"type":"string","description":"Тип платежа - paid, trial или issued-by-admin"},"finishAt":{"type":"string","description":"Дата окончания тарифа"}},"example":{"_id":"63e864ae801189b4df7ea04d","type":"paid","finishAt":"2023-03-14T04:02:45.100Z"}}}}}}}},"/search":{"get":{"summary":"Поиск >  Поиск фильмов, сериалов и всего их персонала сьемочной группы","tags":["Search"],"parameters":[{"in":"query","name":"query","required":true,"schema":{"type":"string"},"description":"Для поиска документов (сущностей таблицы movies), с которыми совпадают символы в полях name(название фильма) или origName( оригинальное название фильма), shortDesc(краткое описание), fullDesk(полное описание), countries(страна), persons(Актёры и съемочная группа)"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей(фильмов) в БД удовлетворяющих переданному query параметру"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"shortDesc":{"type":"string","description":"Краткое описание"},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность","poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}}}}},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"Date","description":"Дата релиза"},"categoryAlias":{"type":"string","description":"Вид категориии. Может быть films, serials или collections"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму? путь к фильму?"}}}}}},"examples":{"example":{"description":"Ответ в результате запроса с query параметром \"Венгрия\" (/search?query=Венгрия)","value":{"totalSize":3,"items":[{"name":"Ведьмак","shortDesc":"Более чем за тысячу лет до появления Геральта из Ривии семь изгоев мира эльфов объединяют свои силы против всемогущей империи.","ageLevel":18,"dateReleased":"2019-12-20","categoryAlias":"serials","poster":{"src":"/images/63e00a92ccaf134edd216858.jpg"},"rating":7,"duration":56502.375,"url":"/p/vedmak","trailer":{"_id":"63b4af65f5af3c4f9dca53a6","src":"/videos/63b4af65f5af3c4f9dca53a5.mp4","thumbnail":"/images/63b4af65f5af3c4f9dca53a7.jpg"}},{"name":"Король Англии","shortDesc":"Англия, начало XV века, разгар Столетней войны. Принц Уэльский Хел ведёт распутный образ жизни со своим приятелем","ageLevel":18,"dateReleased":"2019-09-02","categoryAlias":"films","poster":{"src":"/images/63c0fb1423c814afb609605a.jpg"},"rating":8,"duration":8429.083333,"url":"/p/korol-anglii","trailer":{"_id":"63b4af65f5af3c4f9dca53a6","src":"/videos/63b4af65f5af3c4f9dca53a5.mp4","thumbnail":"/images/63b4af65f5af3c4f9dca53a7.jpg"}},{"name":"Смертельная зона","shortDesc":"«Смертельная зона» — американский научно-фантастический фильм, режиссёра Микаэля Хофстрёма. Фильм вышел на Netflix 15 января 2021","ageLevel":18,"dateReleased":"2021-01-15","categoryAlias":"films","poster":{"src":"/images/63c130fe23c814afb6097501.jpg"},"duration":6952.541667,"url":"/p/smertelnaya-zona","trailer":{"_id":"63b4af65f5af3c4f9dca53a6","src":"/videos/63b4af65f5af3c4f9dca53a5.mp4","thumbnail":"/images/63b4af65f5af3c4f9dca53a7.jpg"}}]}}}}}}}}},"/search/oftenSeek":{"get":{"summary":"Поиск > Часто ищут","tags":["Search"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество документов(фильмов) в БД в коллекции movies"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Название фильма"},"shortDesc":{"type":"string","description":"Краткое описание"},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"Date","description":"Дата релиза"},"categoryAlias":{"type":"string","description":"Вид категориии. Может быть films, serials или collections"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность","poster":{"type":"object","required":false,"properties":{"src":{"type":"string","description":"Путь к файлу изображению"}}}}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму? путь к фильму?"}}}}}},"examples":{"example":{"description":"Ответ в результате запроса с query параметром imit=3 (/search/oftenSeek?limit=3)","value":{"totalSize":407,"items":[{"name":"HLS","shortDesc":"протокол для потоковой передачи медиа данных через интернет","categoryAlias":"films","duration":139.328,"url":"/p/hls","trailer":{"_id":"642f4a4b8e6fd86616fe01a1","src":"/videos/642f4a4b8e6fd86616fe019e.mp4","thumbnail":"/images/642f4a4b8e6fd86616fe01a0.jpg"}},{"name":"Белый шум","shortDesc":"Белый шум описывает историю семьи Глэдни, на долю которой, кроме внутренних назревающих проблем","ageLevel":16,"dateReleased":"2022-08-31","categoryAlias":"films","poster":{"src":"/images/6405fe000a569a75e15129f4.jpg"},"duration":8216.875,"url":"/p/belyy-shum","trailer":{"_id":"642f4a4b8e6fd86616fe01a1","src":"/videos/642f4a4b8e6fd86616fe019e.mp4","thumbnail":"/images/642f4a4b8e6fd86616fe01a0.jpg"}},{"name":"Вундеркинды","shortDesc":"От микробов и эмоций до социальных сетей и многого другого — это наука о нашем мире, объясняемая в необычно доходчивой форме.","ageLevel":6,"dateReleased":"2018-11-02","categoryAlias":"serials","poster":{"src":"/images/642f5e208e6fd86616fe08d5.jpg"},"duration":18578.069334,"url":"/p/vunderkindy","trailer":{"_id":"642f4a4b8e6fd86616fe01a1","src":"/videos/642f4a4b8e6fd86616fe019e.mp4","thumbnail":"/images/642f4a4b8e6fd86616fe01a0.jpg"}}]}}}}}}}}},"/auth/logout":{"post":{"summary":"Выход из сессии","tags":["Auth"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string","description":"JWT token","example":"byJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0ODA4ODZjMmZjMzhkY2E4MDQyOThkMCIsImlhdCI6MTY4ODc1NDAwMywiZXhwIjoxNzIwMzExNjAzfQ.sTY0dun0jUgAS96QXciWl7V-J7OeurvxmSAXjNp-AFQ","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Cообщение \"success\""}},"example":{"type":"success"}}}}}}}},"/auth/login":{"post":{"summary":"Авторизация через яндекс","tags":["Auth"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string","description":"JWT token"}},"example":{"token":"eyJhbGciOiJIUzI1NiIsInR1cCI6IkpXVCJ9.eyJpZCI6IjY0ODA4ODZjMmZjMzhkY2E4MDQyOThkMCIsImlhdCI6MTY4ODc1NDAwMywiZXhwIjoxNzIwMzExNjAzfQ.sTY0dun0jUgAS96QXciWl7V-J7OeurvxmSAXjNp-AFQ"}}}}}}}},"/movies":{"get":{"summary":"Список фильмов и сериалов","tags":["Movies"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество сущностей(фильмов) в коллекции Movies"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"aliasInUrl":{"type":"string","description":"Вид категории. Может быть films, serials"},"alias":{"type":"string","description":"Сгенерированный ЧПУ (человеко понятный url)"}}}}},"example":{"totalSize":407,"items":[{"_id":"63ac7d6ab2c93ed221218186","alias":"armiya-vorov","category":{"aliasInUrl":"filmy"}},{"_id":"63ac8aa1b2c93ed2212186e7","alias":"uendell-i-uayld","category":{"aliasInUrl":"filmy"}},{"_id":"63acabd6b2c93ed221218e9e","alias":"aferist-iz-tinder","category":{"aliasInUrl":"filmy"}}]}}}}}}}},"/movies/movie":{"get":{"summary":"Получение одной записи","tags":["Movies"],"parameters":[{"in":"query","name":"_id","schema":{"type":"string"},"description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)"},{"in":"query","name":"alias","schema":{"type":"string"},"description":"Сгенерированный ЧПУ (человеко понятный url)"},{"in":"query","name":"limitMovieRatings","schema":{"type":"string"},"description":"Параметр опредеюящий максимальное количество элементов в поле movieratings  ( оценок с отзывами от пользователей)"},{"in":"query","name":"skipMovieRatings","schema":{"type":"string"},"description":"Параметр для пропуска первых n документов поля movieratings ( оценок с отзывами от пользователей)"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"name":{"type":"string","description":"Название фильма на русском"},"origName":{"type":"string","description":"Оригинальное название фильма на английском"},"shortDesc":{"type":"string","description":"Краткое описание"},"fullDesc":{"type":"string","description":"Полное описание"},"ageLevel":{"type":"string","description":"Возрастное ограничение"},"dateReleased":{"type":"string","description":"Дата выпуска"},"countries":{"type":"array","description":"Cписок стран","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название страны"}},"categoryAlias":{"type":"string","description":"Вид категориию. Может быть films, serials"},"genreNames":{"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}},"persons":{"type":"array","description":"Список актёров и преставителей съемочной группы","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"name":{"type":"string","description":"Имя и фамилия человека"},"type":{"type":"string","description":"director - режиссер, actor - актер, producer - продюсер, screenwriter - сценарист, operator - оператор"}}}},"sourses":{"type":"object","description":"Параметры исходников видео. Объект для фильмов. Для сериалов здесь приходит массив из одного массива в котором объекты","properties":{"_id":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"src":{"type":"string","description":"Источник на файл ( путь к исходнику )"},"duration":{"type":"number","description":"Длительность фильма"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"}}},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению постера"}}},"cover":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению обложки"}}},"logo":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению логотипа"}}},"trailer":{"type":"object","properties":{"id":{"type":"string","description":"Mongoose.ObjectId"},"src":{"type":"string","description":"Путь к файлу изображению обложки"},"thumbnail":{"type":"string","description":"Миниатюра (кадр из видео)"},"duration":{"type":"number","description":"Длительность"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"url":{"type":"string","description":"Url к фильму"},"similarItems":{"type":"array","uniqueItems":true,"description":"Массив фильмов/сериалов с подобными жанрами","minItems":0,"items":{"type":"object","properties":{"_id":{"type":"string","description":"Id(mongoose.ObjectId) фильма/cериала (документа коллекции movie)"},"name":{"type":"string","description":"Название фильма на русском"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"badge":{"type":"object","description":"Бейдж","required":false,"properties":{"type":{"type":"string","descriptipn":"newSeason - новый сезон, premiere - премьера"},"startAt":{"type":"date","descriptipn":"дата начала показа бейджа"},"finishAt":{"type":"date","descriptipn":"дата окончания показа бейджа"}}},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению постера"}}},"rating":{"type":"number","description":"Рейтинг от 0 до 10"},"url":{"type":"string","description":"Url к фильму"},"genreNames":{"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}}}}},"movieratings":{"type":"array","uniqueItems":true,"description":"Массив отзывов","items":{"type":"object","properties":{"_id":{"type":"string","description":"Id(mongoose.ObjectId) отзыва (документа коллекции movieRating)"},"movieId":{"type":"string","description":"Id(mongoose.ObjectId) фильма/cериала (документа коллекции movie)"},"rating":{"type":"number","description":"Оценка фильма/сериала, поставленная пользователем"},"review":{"type":"string","description":"Комментарий к фильму/сериалу от пользователя"},"updatedAt":{"type":"string","description":"Дата обновления отзыва/оценки от пользователя"},"user":{"type":"object","properties":{"_id":{"type":"string","description":"Id(mongoose.ObjectId) пользователя (документа коллекции users)"},"avatar":{"type":"string","description":"Путь к исходнику картинки профиля пользователя"},"firstname":{"type":"string","description":"Имя пользователя"},"lastname":{"type":"string","description":"Фамилия пользователя"},"displayName":{"type":"string","description":"Отображаемое имя пользователя"}},"description":"Id(mongoose.ObjectId) фильма/cериала (документа коллекции movie)"},"name":{"type":"string","description":"Название фильма на русском"},"duration":{"type":"string","description":"Длительность фильма в секундах"},"poster":{"type":"object","properties":{"src":{"type":"string","description":"Путь к файлу изображению постера"}}},"genreNames":{"type":"array","description":"Cписок жанров","uniqueItems":true,"minItems":0,"items":{"type":"string","description":"Название жанра"}}}}}},"example":{"_id":"63ac8aa1b2c93ed2212186e7","name":"Уэнделл и Уайлд","origName":"Wendell & Wild","shortDesc":"Два коварных демона заключают сделку с девочкой-подростком, которая обожает панк-рок. Они хотят покинуть Подземный мир и воплотить свои мечты в Стране живых.","fullDesc":"Два коварных демона заключают сделку с девочкой-подростком, которая обожает панк-рок. Они хотят покинуть Подземный мир и воплотить свои мечты в Стране живых.","ageLevel":12,"dateReleased":"2022-09-11","countries":["США"],"categoryAlias":"films","persons":[{"name":" Генри Селик","type":"director"},{"name":" Лирик Росс","type":"actor"},{"name":"Кигэн-Майкл Ки","type":"actor"},{"name":"Джордан Пил","type":"actor"},{"name":"Анджела Бассетт","type":"actor"},{"name":"Джеймс Хун","type":"actor"},{"name":"Сэм Зелайа","type":"actor"},{"name":"Тамара Смарт","type":"actor"},{"name":"Сима Вирди","type":"actor"},{"name":"Рамона Янг","type":"screenwriter"},{"name":"Клэй МакЛеод Чэпман","type":"screenwriter"},{"name":" Питер Сорг","type":"operator"}],"poster":{"src":"/images/63ad6f76b2c93ed22121a059.jpg"},"cover":{"src":"/images/63ac8ae3b2c93ed22121871b.jpg"},"trailer":{"_id":"63ba2ad54b33357ef706971c","src":"/videos/63ba2ad54b33357ef706971b.mp4","thumbnail":"/images/63ba2ad54b33357ef706971d.jpg"},"logo":{"src":"/images/641f1cc0944e8bd192d14219.png"},"duration":6388.583333,"url":"/p/uendell-i-uayld","genreNames":["Фэнтези","Комедии","Приключения","Семейные","Мультфильмы"],"sources":{"_id":"63ad700db2c93ed22121a0e4","src":"/videos/63ad700ab2c93ed22121a0e3.mp4","duration":6388.583333,"thumbnail":"/images/63ad700db2c93ed22121a0e5.jpg"},"movieratings":[{"_id":"63ef015e1894cb4889259f16","movieId":"63ac7d6ab2c93ed221218186","rating":10,"updatedAt":"2023-02-17T04:23:58.962Z","user":{"_id":"63ef00f41894cb4889259eb3","avatar":null,"firstname":"","lastname":"Dev","displayName":"Евгений"}},{"_id":"64c802905d0af132b68df659","movieId":"63ac7d6ab2c93ed221218186","rating":9,"review":"Захватывающий сюжет, невозможно оторваться. Супер атмосфера. Хочется пересмотреть еще раз! Но главный герой смотрится немного неуклюжим и нелогичгым. Я бы на его месте поступала по другому. Тем не менее в остальных моментах все выглядит очень правдоподобно","updatedAt":"2023-07-31T19:00:29.607Z","user":{"_id":"6480807e904d20e5d4c1b6db","avatar":null,"firstname":"Семён 12","lastname":"Папин","displayName":"7on999@gmail.com"}},{"_id":"64c80572079b077cccb602fb","movieId":"63ac7d6ab2c93ed221218186","rating":9,"review":"И вот наконец-то стартовала премьера фильма, появление на свет которого многие зрители нашей необъятной ждали с 2021-ого года. Именно в конце того самого года режиссер ленты со своей командой отправился на орбиту, чтобы снять первый полнометражный фильм в космосе. Это событие дало старт мощнейшей пиар-кампании по заманиванию честных граждан в кинотеатры. Афиши, реклама по ТВ, вставки, многочисленные сюжеты по 'Первому каналу'... ","updatedAt":"2023-07-31T19:03:14.577Z","user":{"_id":"64c161c1fc9fe294d4f1078a","avatar":null,"firstname":"Анна","lastname":"Папина","displayName":"papina.annie"}},{"_id":"64c805ba82d27d3cf1b27602","movieId":"63ac7d6ab2c93ed221218186","rating":5,"review":"Фильм очень разочаровал, причём я изначально не ожидал многого от сюжета и игры актёров. Шёл в кино, чтобы увидеть космос на большом экране. К сожалению, космосу отвели минимум экранного времени:","updatedAt":"2023-07-31T19:04:26.228Z","user":{"_id":"63bfe1f923c814afb6093783","avatar":null,"firstname":"Mikhail","lastname":"Zakharovskiy","displayName":"me@stwinnie.com"}},{"_id":"64c805f242c483a99d43a463","movieId":"63ac7d6ab2c93ed221218186","rating":6,"review":"Ещё на стадии съёмок зрители уже топили этот корабль, но кто-то верил, что чудо все таки существует. Ведь у создателей был козырь в виде первого фильма, снятого в космосе, которым они апеллировали весь период промо-кампании. И надо сказать, это одно из немногих, что в фильме действительно хорошо. Хотя в то же время, если хочется посмотреть кадры космоса, то это можно сделать дома в любое время, а не тратить более 2.5 часов в кинотеатре.","updatedAt":"2023-07-31T19:05:22.975Z","user":{"_id":"63c85c9f6396809788dfb785","avatar":null,"firstname":"Кирилл","lastname":"Степанов","displayName":"Kirill-Eremeev23"}},{"_id":"64c8065c74233ab1bac5f87e","movieId":"63ac7d6ab2c93ed221218186","rating":8,"review":"Очень тяжелый фильм! Уж сколько лет прошло с момента, как я его посмотрела, а все не могу пересмотреть, хоть и очень понравился. Во-первых, хорошо помню его - врезался в память, а во-вторых, такое впечатление оставляет после себя, что думаешь, думаешь, думаешь.... Очень сильный","updatedAt":"2023-07-31T19:07:08.970Z","user":{"_id":"63c85d466396809788dfb88e","avatar":null,"firstname":"Просто Костя","lastname":"Семенов","displayName":"kostya.semyonov2016@gmail.com"}},{"_id":"64c80695c9f163108ceb7363","movieId":"63ac7d6ab2c93ed221218186","rating":4,"review":"Смотрела этот фильм, но почти ничего не помню, кроме ужасной концовки и жуткого поступка этого нового домовладельца.","updatedAt":"2023-07-31T19:08:05.187Z","user":{"_id":"63c85d766396809788dfb8ea","avatar":"/images/63c85d766396809788dfb8e9.jpg","firstname":"Максим","lastname":"Лепин","displayName":"Максим Лепин"}},{"_id":"64c8084f4ddfc2336b2d8aee","movieId":"63ac7d6ab2c93ed221218186","rating":8,"review":"Помню, когда я впервые посмотрела фильм, как меня переполняли эмоции. Это такая необычная история, которую я не видела ранее. Фильм произвёл на меня явно сильное впечатление. И несмотря на то, что кино идёт около трёх часов, время пролетает незаметно быстро.","updatedAt":"2023-07-31T19:15:27.026Z","user":{"_id":"63c8c1d96396809788dfdc41","avatar":null,"firstname":"Александр","lastname":"Балясников","displayName":"aleksandrbalyasnikov@gmail.com"}},{"_id":"64c8089ea22867adc906914b","movieId":"63ac7d6ab2c93ed221218186","rating":10,"review":"Фильм просто невероятный. Первый раз смотрела с замиранием сердца. Сколько эмоций и он не похож ни на один другой фильм","updatedAt":"2023-07-31T19:20:14.605Z","user":{"_id":"63c8c9b96396809788dfdd58","avatar":"/images/63c8c9b96396809788dfdd57.jpg","firstname":"Елена","lastname":"svirepa","displayName":"alena.svirepa"}}],"similarItems":[{"_id":"63bafda44b33357ef706bd9e","name":"Ферри","poster":{"src":"/images/63bb942ba10c560357ec2e9f.jpg"},"duration":6420.5,"url":"/p/amerika-film","rating":9,"badge":{"type":"newSeason","startAt":"2022-01-01T00:00:00.000Z","finishAt":"2024-01-01T00:00:00.000Z"},"genreNames":["Боевики","Триллеры","Драмы","Криминал"]},{"_id":"63bbf7ee23c814afb608a5d5","name":"Осада в Сильвертоне","poster":{"src":"/images/63bcfcab23c814afb608c6a2.jpg"},"duration":6062.625,"genreNames":["Боевики","Триллеры","Драмы","Криминал","Исторические"]},{"_id":"6499bdbe9c45fd3d06d89094","name":"Армия воров 3","rating":6,"duration":0,"genreNames":["Боевики","Триллеры","Криминал"]},{"_id":"63ad7d34b2c93ed22121a4f2","name":"Армия мертвецов","poster":{"src":"/images/63ad7d37b2c93ed22121a51e.jpg"},"duration":8906.833333,"genreNames":["Ужасы","Боевики","Криминал","Триллеры","Фантастика"]},{"_id":"63adf8c5b2c93ed22121b7f9","name":"Беккет","poster":{"src":"/images/63adf8c8b2c93ed22121b823.jpg"},"duration":6605.791667,"genreNames":["Боевики","Триллеры","Драмы","Криминал"]},{"_id":"63ad873eb2c93ed22121a7c3","name":"В тени Луны","poster":{"src":"/images/63ad8741b2c93ed22121a7ed.jpg"},"duration":6931.791667,"genreNames":["Боевики","Фантастика","Криминал","Триллеры","Детективы"]},{"_id":"63acc01cb2c93ed221219609","name":"Кейт","poster":{"src":"/images/63acc01fb2c93ed221219637.jpg"},"duration":6470.125,"genreNames":["Боевики","Триллеры","Криминал"]},{"_id":"63b5deb6bada9539c72fb48e","name":"Экстремо","poster":{"src":"/images/63b5def4bada9539c72fb590.jpg"},"duration":6742.666667,"genreNames":["Боевики","Триллеры","Драмы","Криминал","Приключения"]},{"_id":"63c69fc21c98adb3690e592f","name":"В упор","poster":{"src":"/images/63c94cc56396809788e002c7.jpg"},"duration":5201.916667,"genreNames":["Боевики","Триллеры","Криминал"]},{"_id":"63bc071f23c814afb608b170","name":"Неогранённые алмазы","poster":{"src":"/images/63bcf11c23c814afb608bf8b.jpg"},"duration":8147.666667,"genreNames":["Триллеры","Драмы","Криминал"]},{"_id":"63bd642e23c814afb608ffde","name":"Виновный","poster":{"src":"/images/63be3f5f23c814afb60919da.jpg"},"duration":5465.375,"genreNames":["Триллеры","Криминал"]},{"_id":"63dc1fd594254691aaa7d4c8","name":"Расплата за грехи","poster":{"src":"/images/63dd438128f91e4e4703f397.jpg"},"duration":5778.75,"genreNames":["Триллеры","Драмы","Мелодрамы","Криминал","Детективы"]},{"_id":"63bbff8523c814afb608ac10","name":"Тройная граница","poster":{"src":"/images/63bcf95623c814afb608c454.jpg"},"duration":7557.375,"genreNames":["Боевики","Триллеры"]},{"_id":"63bbfd4223c814afb608aa04","name":"Тайлер Рейк: Операция по спасению","poster":{"src":"/images/63bd26e323c814afb608d4e5.jpg"},"duration":7052.875,"genreNames":["Боевики","Криминал"]},{"_id":"63c213557621fcffb6e676d5","name":"В погоне за Бонни и Клайдом","poster":{"src":"/images/63c3d4561c98adb3690e03a4.jpg"},"duration":7936.541667,"genreNames":["Триллеры","Драмы","Криминал","Детективы","Биографии"]},{"_id":"63bb00ad4b33357ef706c023","name":"Внезапная удача","poster":{"src":"/images/63bb9be6a10c560357ec32fd.jpg"},"duration":5546.5,"genreNames":["Триллеры","Драмы","Криминал"]},{"_id":"63c1ddc423c814afb609b318","name":"Земля и кровь","poster":{"src":"/images/641f48a9944e8bd192d19541.jpg"},"duration":4856.5,"genreNames":["Боевики","Криминал"]},{"_id":"63c69e511c98adb3690e58fe","name":"Утёйа, 22 июля","poster":{"src":"/images/63cd96a41a0acf0408641cd4.jpg"},"duration":8639.041667,"genreNames":["Триллеры","Драмы","Криминал","Исторические"]},{"_id":"63cd29bb1a0acf040863ec84","name":"Ограбить Муссолини","poster":{"src":"/images/63d19cc81a0acf040864e8c0.jpg"},"duration":5986.958333,"genreNames":["Боевики","Комедии","Криминал","Драмы"]},{"_id":"63cd25911a0acf040863e817","name":"4 наёмника","poster":{"src":"/images/6407a0d35da2f6823e4b31d3.jpg"},"duration":8512.625,"genreNames":["Боевики","Комедии","Криминал"]}]}}}}}}}},"/movies/rating":{"get":{"summary":"Получить рейтинг и комментарий поставленный пользователем","tags":["Movies"],"parameters":[{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)","required":true}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"rating":{"type":"number","description":"Рейтинг который поставил пользователь фильму с переданным id"},"review":{"type":"string","description":"Комментарий (отзыв) пользователя к фильму/cериалу"}},"example":{"rating":8,"review":"Классный фильм"}}}}}}},"post":{"summary":"Отправка рейтинга(оценки) и отзыва(комментария)","tags":["Movies"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)","required":true},"rating":{"type":"number","description":"Оценка фильма по шкале от 1 до 10"},"review":{"type":"string","description":"Комментарий (отзыв) пользователя к фильму/cериалу"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Значение true - сообщение об успехе"},"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"rating":{"type":"number","description":"Рейтинг который поставил пользователь фильму с переданным id"}},"example":{"success":true,"movieId":"63ac8aa1b2c93ed2212186e7","rating":9,"review":"Классный фильм"}}}}}}},"delete":{"summary":"Удаления рейтинга и отзыва","tags":["Movies"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Надпись \"success\""},"alert":{"type":"boolean","description":"Значение true"},"_id":{"type":"string","description":"Id удаленного фильма или сериала (mongoose.ObjectId)"},"msg":{"type":"string","description":"Надпись \"Успешно удалено\""}},"example":{"type":"success","alert":true,"id":"63ac7d6ab2c93ed221218186","msg":"Успешно удалено"}}}}}}}},"/movies/favorite":{"get":{"summary":"Получение статуса на избранное","tags":["Movies"],"parameters":[{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)","required":true}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)"},"isFavorite":{"type":"boolean","description":"Добавлен ли данный фильм данным пользователем в избранное"}},"example":{"movieId":"63ac8aa1b2c93ed2212186e7","isFavorite":true}}}}}}},"post":{"summary":"Добавление / удаление из избранного","tags":["Movies"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId) для добавления или удаления из изранного ( если значение в бд в коллекции userFavorite есть для заданного фильма и пользователя - оно меняется на противоположное, если значения в бд нет - фильм добавляется в избранное)","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Значение true - сообщение об успехе"},"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)"},"isFavorite":{"type":"boolean","description":"Добавлен ли данный фильм данным пользователем в избранное"}},"example":{"success":true,"movieId":"63ac8aa1b2c93ed2212186e7","isFavorite":true}}}}}}}},"/movies/bookmark":{"get":{"summary":"Получение статуса на закладку","tags":["Movies"],"parameters":[{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)","required":true}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)"},"isBookmark":{"type":"boolean","description":"Добавлен ли данный фильм данным пользователем в закладки"}},"example":{"movieId":"63ac8aa1b2c93ed2212186e7","isBookmark":true}}}}}}},"post":{"summary":"Добавление / удаление из закладок","tags":["Movies"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id фильма/cериала (mongoose.ObjectId) для добавления или удаления из изранного ( если значение в бд в коллекции userBoolmark есть для заданного фильма и пользователя - оно меняется на противоположное, если значения в бд нет - фильм добавляется в избранное)","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","description":"Значение true - сообщение об успехе"},"movieId":{"type":"string","description":"Id фильма/сериала (mongoose.ObjectId)"},"isBookmark":{"type":"boolean","description":"Добавлен ли данный фильм данным пользователем в закладки"}},"example":{"success":true,"movieId":"63ac8aa1b2c93ed2212186e7","isBookmark":true}}}}}}}},"/movies/logs":{"get":{"summary":"Получение логов просмотра фильма / серий сериала","tags":["Movies"],"parameters":[{"in":"query","name":"movieId","schema":{"type":"string"},"description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)","required":true}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","uniqueItems":true,"description":"Массив из одного объекта приходит в ответе","minItems":0,"items":{"type":"object","properties":{"videoId":{"type":"string","description":"Id(mongoose.ObjectId) фильма (документа коллекции movie)"},"endTime":{"type":"string","description":"Время окончания просмотра фильма в секундах"},"updatedAt":{"type":"string","description":"Дата обновления"}}},"example":[{"endTime":5222.535369,"videoId":"63be220123c814afb6091621","updatedAt":"2023-07-11T11:06:47.141Z"}]}}}}}}},"/movies/addLog":{"post":{"summary":"Добавление записи просмотра фильма / серий сериала в логи","tags":["Movies"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"movieId":{"type":"string","description":"Id фильма (mongoose.ObjectId)","required":true},"videoId":{"type":"string","description":"Id видео (mongoose.ObjectId)","required":true},"startTime":{"type":"number","description":"Время начала просмотра фильма в секундах","required":false},"endTime":{"type":"number","description":"Время окончания просмотра фильма в секундах","required":false}}}}}},"responses":{"200":{"description":"OK"}}}},"/referral":{"get":{"summary":"Реферальная программа - получение общих данных","tags":["Referral"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"link":{"type":"string","description":"Реферальная ссылка"},"referralPercentBonuse":{"type":"number","description":"Бонус в процентах от реферала"},"balance":{"type":"number","description":"Текущий баланс с подписок рефералов"},"card":{"type":"object","description":"Данные карты для вывода баланса","properties":{"number":{"type":"string","description":"Номер карты"},"balance":{"type":"string","cardholder":"Владелец карты"}}}},"example":{"link":"deercvt4btf/?r=6480807e904d20e5d4c1b6db","referralPercentBonuse":50,"balance":5000,"card":{"number":"1234123412341234","cardholder":"Иванов СН"}}}}}}}}},"/referral/invitedReferrals":{"get":{"summary":"Реферальная программа > Список \"Мои рефералы\"","tags":["Referral"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Общее количество рефералов"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"payment":{"type":"object","properties":{"createdAt":{"type":"string","description":"Дата создания"},"status":{"type":"string","description":"Статус"},"bonuseAmount":{"type":"string","description":"Бонусное количество рублей"}}},"user":{"type":"object","properties":{"avatar":{"type":"string","description":"Ссылка на файл картинку аватарки"},"firstname":{"type":"string","description":"Имя пользователя"}}}}}}},"example":{"totalSize":3,"items":[{"payment":{"createdAt":"2023-08-20T17:10:21.990Z","status":"CONFIRMED","bonuseAmount":249.5},"user":{"avatar":"/images/64808068904d20e5d4c1b555.jpg","firstname":"Евгений"}},{"payment":{"createdAt":"2023-02-13T12:44:07.716Z","status":"REFUNDED","bonuseAmount":96.515},"user":{"avatar":null,"firstname":"Гузаль"}},{"payment":{"createdAt":"2023-03-02T17:02:49.375Z","status":"PARTIAL_REFUNDED","bonuseAmount":96.515},"user":{"avatar":null,"firstname":"Ринат"}}]}}}}}}}},"/referral/withdrawalOfMoney":{"get":{"summary":"Реферальная программа > Список \"История выводов\"","tags":["Referral"],"parameters":[{"in":"query","name":"limit","schema":{"type":"number"},"description":"Ограничение на максимальное количество элементов в теле ответа"},{"in":"query","name":"skip","schema":{"type":"number"},"description":"Количество пропускаемых элементов из начала выборки"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"totalSize":{"type":"number","description":"Всего записей"},"items":{"type":"array","uniqueItems":true,"minItems":0,"items":{"type":"object","properties":{"card":{"type":"object","properties":{"number":{"type":"string","description":"Номер карты ( последние 4 символа)"}}},"amount":{"type":"object","description":"Сумма"},"createdAt":{"type":"string","description":"Дата создания"},"status":{"type":"string","description":"Статус"}}}}},"example":{"totalSize":6,"items":[{"amount":500,"card":{"number":"**** **** **** 1234"},"status":"pending","createdAt":"2023-08-07T07:49:53.803Z"},{"amount":322,"card":{"number":"**** **** **** 1234"},"status":"pending","createdAt":"2023-08-06T17:55:55.609Z"},{"amount":20,"card":{"number":"**** **** **** 4444"},"status":"pending","createdAt":"2023-08-05T20:19:56.715Z"},{"amount":1000,"card":{"number":"**** **** **** 4444"},"status":"pending","createdAt":"2023-08-05T16:33:43.967Z"},{"amount":2000,"card":{"number":"**** **** **** 4444"},"status":"pending","createdAt":"2023-07-20T03:26:17.630Z"},{"amount":1000,"card":{"number":"**** **** **** 4444"},"status":"pending","createdAt":"2023-07-20T03:25:27.935Z"}]}}}}}}}},"/referral/changeCard":{"patch":{"summary":"Реферальная программа > Изменить данные карты","tags":["Referral"],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"number":{"type":"string","description":"Номер карты","required":true},"cardholder":{"type":"string","description":"Держатель карты","required":true}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Карта обновлена"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","alert":true,"msg":"Карта обновлена"}}}}}}}},"/referral/deleteCard":{"delete":{"summary":"Реферальная программа > Удалить данные карты","tags":["Referral"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Данные карты удалены"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","alert":true,"msg":"Данные карты удалены"}}}}}}}},"/referral/withdrawBalance":{"post":{"summary":"Реферальная программа > Создание заявки на вывод c обнулением баланса","tags":["Referral"],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"success"},"msg":{"type":"string","description":"Создана заявка на вывод средств"},"alert":{"type":"boolean","description":true}},"example":{"type":"success","alert":true,"msg":"Создана заявка на вывод средств"}}}}}}}}},"definitions":{"XmlSiteMapModel":{"type":"object","xml":{"name":"urlset"},"properties":{"xmlns":{"type":"string","example":"http://www.sitemaps.org/schemas/sitemap/0.9","xml":{"attribute":true}},"xmlns:xsi":{"type":"string","example":"http://www.w3.org/2001/XMLSchema-instance","xml":{"attribute":true}},"xsi:schemaLocation":{"type":"string","example":"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd","xml":{"attribute":true}},"url":{"type":"object","properties":{"priority":{"type":"string","example":0.8},"changefreq":{"type":"string","example":"weekly"},"loc":{"type":"string","example":"https://tvoe.live/p/armiya-vorov"},"lastmod":{"type":"string","example":"2023-06-26T00:00:00.000Z"}}}}}}}